steal("jquery/controller",function(c){c.Controller("CE.Grid",{myThis:null},{columnWidthPiece:null,columnMarginPiece:null,splitterWidthPiece:null,splitterMarginPiece:null,column:null,columnCount:12,columnWidthStatus:null,rowEl:c("<div />",{"class":"mp-row-fluid"}),columnEl:c("<div />",{"class":"mp-span1"}),setup:function(a){for(var b=0;b<this.columnCount;b++)this.rowEl.append(this.columnEl.clone());a.append(this.rowEl)},init:function(a){CE.Grid.myThis=this;this.column=a.find(".mp-span1:last");this.setSize();
c(window).on("resize",this.proxy("setSize"))},setSize:function(){var a=this.column.width();this.columnWidthStatus&&this.columnWidthStatus===a||(this.columnWidthPiece=parseFloat(this.column.width()),this.columnMarginPiece=parseFloat(this.column.css("margin-left")),this.splitterWidthPiece=this.columnMarginPiece/100*66.66666,this.splitterMarginPiece=this.columnMarginPiece/100*83.33333,this.columnWidthStatus&&(CE.Resizer.myThis.updateSplittableOptions(null,null,null,"init"),CE.Resizer.myThis.updateSplitterHeight(null,
"init")),this.columnWidthStatus=a)}})});
steal("jquery/class",function(c){c.Class("CE.LeftBar",{myThis:null},{leftBar:c("<div />",{"class":"motopress-default",id:"motopress-content-editor-leftbar",tabIndex:-1}),leftBarOverlap:c("<div />",{"class":"motopress-leftbar-overlap"}),group:c("<div />",{"class":"motopress-leftbar-group motopress-default"}),groupInner:c("<div />",{"class":"motopress-leftbar-group-inner motopress-default"}),groupIcon:c("<div />",{"class":"motopress-leftbar-group-icon"}),groupActive:c("<div />",{"class":"motopress-leftbar-group-active motopress-default"}),
object:c("<section />",{"class":"motopress-ce-object motopress-default-drag"}),objectInner:c("<div />",{"class":"motopress-ce-object-inner motopress-default"}),objectDot:c("<div />",{"class":"motopress-ce-object-dot motopress-default"}),objectIcon:c("<div />",{"class":"motopress-ce-object-icon"}),objectName:c("<span />",{"class":"motopress-ce-object-name motopress-default motopress-no-color-text"}),library:null,setup:function(){this.getLibrary();this.groupIcon.append(this.groupActive).appendTo(this.groupInner);
this.groupInner.append(this.groupPopover).appendTo(this.group);this.objectInner.append(this.objectDot,this.objectIcon,this.objectName).appendTo(this.object);c("body").prepend(this.leftBar).append(this.leftBarOverlap)},init:function(){CE.LeftBar.myThis=this},getLibrary:function(){c.ajax({url:parent.motopress.ajaxUrl,type:"POST",dataType:"json",data:{action:"motopress_ce_get_library",nonce:parent.motopressCE.nonces.motopress_ce_get_library,postID:parent.motopressCE.postID},success:function(a){CE.LeftBar.myThis.library=
a.groups;c.isPlainObject(a.globalPredefinedClasses)&&!c.isEmptyObject(a.globalPredefinedClasses)&&(CE.Style.globalPredefinedClasses=a.globalPredefinedClasses);c.isArray(a.tinyMCEStyleFormats)&&!c.isEmptyObject(a.tinyMCEStyleFormats)&&(CE.InlineEditor.styleFormats=a.tinyMCEStyleFormats);CE.LeftBar.myThis.createGroup();parent.MP.Preloader.myThis.load(CE.LeftBar.shortName);new CE.DragDrop;parent.MP.Preloader.myThis.hide();c("form#post #motopress-ce-edited-post",parent.document).length||c("form#post",
parent.document).prepend(c("<input>",{type:"hidden",id:"motopress-ce-edited-post",name:"motopress-ce-edited-post",value:parent.motopressCE.postID}))},error:function(a){parent.MP.Preloader.myThis.hide();a=c.parseJSON(a.responseText);a.debug?console.log(a.message):(parent.MP.Flash.setFlash(a.message,"error"),parent.MP.Flash.showMessage())}})},createGroup:function(){if(null!==this.library&&!c.isEmptyObject(this.library)){for(var a in this.library)if(this.library[a].show){var b=this.group.clone();b.find(".motopress-leftbar-group-icon").css("background-image",
"url("+this.library[a].icon+")");b.clickover({html:!0,animation:!1,width:this.getPopupWidth(this.library[a]),title:localStorage.getItem("addBlockTip"),content:this.createObject(this.library[a].id,this.library[a].objects),onShown:function(){this.$tip.find(".arrow").removeClass("arrow").addClass("motopress-ce-arrow");var a=this.$element.is(":first-child")?5:0,a=parseInt(this.$tip.css("top"))+parseInt(this.$tip.css("height"))/2-23+a;this.$tip.css("top",a);a=this.$tip.find(".popover-title");a.addClass("motopress-default motopress-default-text");
if(a.next(".popover-content").length){var b=a.next();a.insertAfter(b);b.addClass("motopress-ce-object-container")}CE.DragDrop.myThis.makeDraggableNewBlock()},onHidden:function(){this.$element.find(".motopress-leftbar-group-active").removeClass("active")}});b.find(".motopress-leftbar-group-active").on("mousedown",function(a){a.preventDefault();a.stopPropagation()});b.appendTo(this.leftBar)}this.hoverActive()}},getPopupWidth:function(a){return 6>Object.keys(a.objects).length?"205px":"620px"},createObject:function(a,
b){if(!c.isEmptyObject(b)){var d=c("<div />"),e;for(e in b)if(b[e].show){var f=this.object.clone();this.setAttrs(f,a,b[e]);f.find(".motopress-ce-object-icon").css("background-image","url("+b[e].icon+")");f.find(".motopress-ce-object-name").text(b[e].name);d.append(f)}return d}},setAttrs:function(a,b,d){a.attr({"data-motopress-close-type":d.closeType,"data-motopress-shortcode":d.id,"data-motopress-group":b,"data-motopress-resize":d.resize});b=d.parameters;if(!c.isEmptyObject(b)){var e={};c.each(b,
function(a){e[a]={}});a.attr("data-motopress-parameters",JSON.stringify(e))}b=a.hasClass(this.object.attr("class"))?CE.Style.props:CE.Style.gridProps;c.extend(!0,b,d.styles,b);if(!c.isEmptyObject(b)){var f={};c.each(b,function(a){f[a]={}});a.attr("data-motopress-styles",JSON.stringify(f))}},hoverActive:function(){c(".motopress-leftbar-group .motopress-leftbar-group-active").mouseover(function(){c(this).addClass("active")})},disable:function(){this.leftBarOverlap.show()},enable:function(){this.leftBarOverlap.hide()}})});
steal("jquery/class",function(c){c.Class("CE.ImageLibrary",{myThis:null},{frame:null,propertyImage:null,init:function(){CE.ImageLibrary.myThis=this;this.frame=parent.wp.media({id:"motopress-image-library",multiple:!1,describe:!1,toolbar:"select",sidebar:"settings",content:"upload",router:"browse",menu:"default",searchable:!0,filterable:!1,sortable:!1,title:localStorage.getItem("CEImageLibraryText"),button:{text:localStorage.getItem("CEImageLibraryText")},library:{type:"image"},contentUserSetting:!0,
syncSelection:!0});this.frame.on("open",this.proxy("onOpen"));this.frame.on("select",this.proxy("setImage"));this.frame.on("close",this.proxy("onClose"))},onOpen:function(){this.frame.reset();this.propertyImage=CE.Dialog.myThis.element.find('[data-motopress-open-img-lib="1"]');var a=this.propertyImage.controller();null!==a.id&&(a=parent.wp.media.attachment(a.id),a.fetch(),this.frame.state().get("selection").add(a))},setImage:function(){var a=this.frame.state().get("selection").models[0].attributes,
b="full";a.sizes.hasOwnProperty("medium")?b="medium":a.sizes.hasOwnProperty("thumbnail")&&(b="thumbnail");var c=a.sizes[b].url,b=this.propertyImage.controller(),c={id:a.id,src:c};null!==b.shortcode&&(c.full=a.sizes.full.url);b.set(c);b.showTools();b.element.trigger("change");this.propertyImage.removeAttr("data-motopress-open-img-lib")},onClose:function(){c("."+CE.Dialog.myThis.dialogClass).focus();var a=c(parent.document).find("html, body");a.addClass("motopress-ce-jumping-fix");var b=setTimeout(function(){a.removeClass("motopress-ce-jumping-fix");
clearTimeout(b)},0)}})});
steal("jquery/class",function(c){c.Class("CE.Link",{myThis:null,wpLink:null,submitCallback:null,closeCallback:null,inputs:{}},{init:function(){CE.Link.myThis=this;CE.Link.wpLink=parent.wpLink;CE.Link.inputs.submit=c("#wp-link-submit",parent.document);CE.Link.inputs.cancel=c("#wp-link-cancel",parent.document);CE.Link.inputs.url=c("#url-field",parent.document);CE.Link.inputs.title=c("#link-title-field",parent.document);CE.Link.inputs.openInNewTab=c("#link-target-checkbox",parent.document)},open:function(a,
b,d,e){var f={url:!0,title:!0,target:!0};"undefined"!==typeof b&&c.extend(f,b);"undefined"!=typeof CE.Link.wpLink&&(CE.Link.submitCallback=d,CE.Link.inputs.submit.off("mousedown.motopress-wplink-submit").on("mousedown.motopress-wplink-submit",this.wpSubmitButtonHandler),CE.Link.inputs.cancel.off("click.motopress-wplink-cancel").on("click.motopress-wplink-cancel",e),parent.wpActiveEditor=!0,CE.Link.wpLink.setDefaultValues=function(){var b=null,d=null,e=null;c.isPlainObject(a)?(b=a.href,d="_blank"===
a.target?!0:!1,e=a.textarea):(b=a.val(),e=a);if(""===b||"#"===b)b="http://";CE.Link.inputs.url.val(b);CE.Link.inputs.openInNewTab.prop("checked",d);CE.Link.wpLink.textarea=e},CE.Link.wpLink.open(),"undefined"===typeof CE.Link.inputs.close&&(CE.Link.inputs.close=c(".ui-dialog-titlebar-close",parent.document)),CE.Link.inputs.close.off("mousedown.motopress-wplink-close").on("mousedown.motopress-wplink-close",e),f.url||CE.Link.inputs.url.closest("div").hide(),f.title||CE.Link.inputs.title.closest("div").hide(),
f.target||CE.Link.inputs.openInNewTab.closest("div").hide(),parent.CE.Iframe.myThis.wpLinkCloseCallback(this.onDialogClose))},wpCancelButtonHandler:function(a){CE.Link.wpLink.close();return!1},wpSubmitButtonHandler:function(a){a=CE.Link.wpLink.getAttrs();if(a.href&&"http://"!=a.href)return CE.Link.submitCallback&&CE.Link.submitCallback(a),CE.Link.wpLink.close(),!1},onDialogClose:function(){CE.Link.inputs.submit.off("mousedown.motopress-wplink-submit");CE.Link.inputs.cancel.off("click.motopress-wplink-cancel");
CE.Link.inputs.close.off("mousedown.motopress-wplink-close");CE.Link.inputs.url.closest("div").show();CE.Link.inputs.title.closest("div").show();CE.Link.inputs.openInNewTab.closest("div").show()}})});
steal("jquery/class",function(c){c.Class("CE.WPGallery",{myThis:null},{frame:null,ctrl:null,init:function(){CE.WPGallery.myThis=this;var a=parent.wp.media,b=a.model.Attachment;a.controller.CEGallery=a.controller.FeaturedImage.extend({defaults:parent._.defaults({id:"motopress-media-library-gallery",title:localStorage.getItem("CEWpGalleryText"),toolbar:"main-insert",filterable:"uploaded",library:a.query({type:"image"}),multiple:"add",editable:!0,priority:60,syncSelection:!1},a.controller.Library.prototype.defaults),
updateSelection:function(){var a=this.get("selection"),c=CE.WPGallery.myThis.ctrl.get(),f;""!==c&&-1!==c&&(f=parent._.map(c.split(/,/),function(a){return b.get(a)}));a.reset(f)}});a.view.MediaFrame.CEGallery=a.view.MediaFrame.Post.extend({createStates:function(){this.states.add([new a.controller.CEGallery])},bindHandlers:function(){a.view.MediaFrame.Select.prototype.bindHandlers.apply(this,arguments);this.on("toolbar:create:main-insert",this.createToolbar,this);parent._.each({content:{embed:"embedContent",
"edit-selection":"editSelectionContent"},toolbar:{"main-insert":"mainInsertToolbar"}},function(a,b){parent._.each(a,function(a,c){this.on(b+":render:"+c,this[a],this)},this)},this)},mainInsertToolbar:function(a){var b=this;this.selectionStatusToolbar(a);a.set("insert",{style:"primary",priority:80,text:localStorage.getItem("CEWpGalleryText"),requires:{selection:!0},click:function(){var a=b.state(),c=a.get("selection");b.close();a.trigger("insert",c).reset()}})}});this.frame=new a.view.MediaFrame.CEGallery(parent._.defaults({},
{state:"motopress-media-library-gallery",title:localStorage.getItem("CEWpGalleryText"),library:{type:"image"},multiple:!0}));this.frame.on("open",this.proxy("onOpen"));this.frame.on("close",this.proxy("onClose"));this.frame.on("insert",this.proxy("setImage"))},open:function(a){this.ctrl=a;this.frame.open()},onOpen:function(){var a=this.frame;a.reset();var b=this.ctrl.getArray();if(null!==b){var c=null;b.forEach(function(b){c=parent.wp.media.attachment(b);c.fetch();a.state().get("selection").add(c)})}},
onClose:function(){c("."+CE.Dialog.myThis.dialogClass).focus();var a=c(parent.document).find("html, body");a.addClass("motopress-ce-jumping-fix");var b=setTimeout(function(){a.removeClass("motopress-ce-jumping-fix");clearTimeout(b)},0)},setImage:function(){var a=[],b=this.frame.state().get("selection").models;c.each(b,function(b,c){a.push(c.attributes.id)});this.ctrl.set(a);this.ctrl.element.trigger("change")}})});
steal("jquery/class",function(c){c.Class("CE.Dialog",{myThis:null},{dialogClass:"motopress-dialog",element:c("<div />",{id:"motopress-dialog"}),shortcode:null,dialog:null,minimizeRestoreBtn:c("<button />",{"class":"ui-dialog-titlebar-minimize"}),state:{minimized:"minimized",restored:"restored"},tabs:c("<div />",{id:"motopress-dialog-tabs"}),settingsTitle:c("<li />"),styleTitle:c("<li />"),settingsTab:c("<div />",{id:"motopress-dialog-settings-tab"}),styleTab:c("<div />",{id:"motopress-dialog-style-tab"}),
setup:function(){var a=c("<ul />");c("<a />",{href:"#"+this.settingsTab.attr("id"),"class":"motopress-text-no-color-text",text:localStorage.getItem("CESettings")}).append(c("<i />",{"class":"motopress-settings-icon"})).appendTo(this.settingsTitle);c("<a />",{href:"#"+this.styleTab.attr("id"),"class":"motopress-text-no-color-text",text:localStorage.getItem("CEStyle")}).append(c("<i />",{"class":"motopress-style-icon"})).appendTo(this.styleTitle);a.append(this.settingsTitle,this.styleTitle);this.tabs.append(a,
this.settingsTab,this.styleTab).appendTo(this.element);this.element.appendTo("body")},init:function(){CE.Dialog.myThis=this;var a=null,b=!1,d=0,e=parent.MP.Utils.version_compare(c.fn.jquery,"1.9.0","<"),f=sessionStorage.getItem("motopressDialogLeft"),g=sessionStorage.getItem("motopressDialogTop"),f=null!==f&&null!==g?[parseInt(f),parseInt(g)]:{my:"right-20 top+20",at:"right top",of:window},g=sessionStorage.getItem("motopressDialogWidth"),h=sessionStorage.getItem("motopressDialogHeight");null===g&&
(g=300);null===h&&(h=500);c.ui.dialog.prototype._focusTabbable=function(){};this.element.dialog({autoOpen:!1,closeOnEscape:!0,closeText:"",dialogClass:this.dialogClass,draggable:!0,modal:!1,position:f,resizable:!0,minWidth:280,width:g,minHeight:280,height:h,maxHeight:c(window).height(),create:function(){CE.Dialog.myThis.dialog=CE.Dialog.myThis.element.dialog("widget");a=CE.Dialog.myThis.dialog;a.on("resizestart",function(a,f){b=c(a.originalEvent.target).hasClass("ui-resizable-n");d=c(document).scrollTop();
e&&(b||c(this).css("top",parseInt(c(this).css("top"))-d))});a.on("resize",function(a,f){e&&b&&c(this).css("top",parseInt(c(this).css("top"))-d)});a.on("resizestop",function(a,b){CE.Dialog.myThis.savePosition(b);CE.Dialog.myThis.saveSize(b)});c(this).prev(".ui-dialog-titlebar").find(".ui-dialog-titlebar-close").before(CE.Dialog.myThis.minimizeRestoreBtn);var f=a.draggable("option","cancel")+", .ui-dialog-titlebar-minimize, .ui-dialog-titlebar-restore";a.draggable("option","cancel",f);CE.Dialog.myThis.minimizeRestoreBtn.on("click",
function(){c(this).hasClass("ui-dialog-titlebar-minimize")?CE.Dialog.myThis.minimize():CE.Dialog.myThis.restore()})},dragStart:function(a,b){CE.LeftBar.myThis.disable()},dragStop:function(a,b){CE.Dialog.myThis.savePosition(b);CE.LeftBar.myThis.enable()},close:function(){CE.Dialog.myThis.close()},open:function(){var b=c("."+CE.Selectable.myThis.selectedClass);b.length&&CE.Selectable.focusWithoutScroll(b.prev());var b=parseInt(sessionStorage.getItem("motopressDialogLeft")),d=parseInt(sessionStorage.getItem("motopressDialogTop")),
e=a.width(),f=a.height(),g=c(window).width(),h=c(window).height();f>h&&(f=h,a.height(f));0>d?a.css("top",0):f<h&&d+f>h?a.css("top",h-f):d+f>h?a.css("top",h-f):a.css("top",d);0>b?a.css("left",0):e<g&&b+e>g?a.css("left",g-e):a.css("left",b)},resizeStart:function(){CE.LeftBar.myThis.disable()},resizeStop:function(){CE.LeftBar.myThis.enable()}});c(parent.window).on("resize",this.proxy("onResize"));this.tabs.tabs({activate:function(a,b){CE.Dialog.myThis.shortcode.attr("data-motopress-dialog-tab",b.newTab.index())}});
this.element.on("click",function(a){c(a.target).is(".motopress-property-color-picker-preview, .motopress-property-input, .iris-picker, .iris-picker-inner, .iris-palette, .iris-palette-add")||c(".motopress-property-color-picker .motopress-property-input").iris("hide")})},onResize:function(){this.element.dialog("option","maxHeight",c(window).height())},open:function(a){a.hasClass("motopress-span-select-handle")?this.shortcode=a.closest(".motopress-span"):a.hasClass("motopress-row-select-handle")?this.shortcode=
a.closest(".motopress-row"):this.shortcode=a.parent(".motopress-helper").prev(".motopress-block-content").children("[data-motopress-shortcode]");var b=this.shortcode.controller(CE.Controls);if(null!==CE.LeftBar.myThis.library&&"undefined"!==typeof b.group&&"undefined"!==typeof b.shortcodeName&&CE.LeftBar.myThis.library[b.group].objects.hasOwnProperty(b.shortcodeName)){var d=CE.LeftBar.myThis.library[b.group].objects[b.shortcodeName];a=c.isEmptyObject(d.parameters);var e=this.isGrid?"gridProps":"props";
a&&c.isEmptyObject(CE.Style[e])||(this.setTitle(d.name),d=!1,this.shortcode.hasClass("motopress-new-object")&&(d=!0,this.shortcode.removeClass("motopress-new-object")),b.displaySettings(d),b.displayStyle(d),sessionStorage.getItem("motopressDialogState")===this.state.minimized?this.minimize():this.restore(),b=a?this.styleTitle.index():this.settingsTitle.index(),d=this.shortcode.attr("data-motopress-dialog-tab"),"undefined"!==typeof d&&(b=d),a?this.tabs.tabs("disable",this.settingsTitle.index()):!1!==
this.tabs.tabs("option","disabled")&&this.tabs.tabs("enable",this.settingsTitle.index()),this.tabs.tabs("option","active",b),this.element.dialog("open"),this.element.find(".motopress-controls").trigger("dialogOpen"))}},close:function(){this.setTitle();var a=c("."+CE.Selectable.myThis.selectedClass);a.length&&CE.Selectable.focusWithoutScroll(a.prev())},setTitle:function(a){a="undefined"!==typeof a?a:"";"string"===typeof a&&this.element.dialog("option","title",a)},savePosition:function(a){sessionStorage.setItem("motopressDialogLeft",
this.dialog.css("left"));sessionStorage.setItem("motopressDialogTop",this.dialog.css("top"))},saveSize:function(a){sessionStorage.setItem("motopressDialogWidth",a.size.width);sessionStorage.setItem("motopressDialogHeight",a.size.height)},minimize:function(){this.minimizeRestoreBtn.removeClass("ui-dialog-titlebar-minimize").addClass("ui-dialog-titlebar-restore");sessionStorage.setItem("motopressDialogState",this.state.minimized);this.element.nextAll().add(this.element).addClass("motopress-hide");this.dialog.removeClass("motopress-dialog-"+
this.state.restored).addClass("motopress-dialog-"+this.state.minimized)},restore:function(){this.minimizeRestoreBtn.removeClass("ui-dialog-titlebar-restore").addClass("ui-dialog-titlebar-minimize");sessionStorage.setItem("motopressDialogState",this.state.restored);this.element.nextAll().add(this.element).removeClass("motopress-hide");this.dialog.removeClass("motopress-dialog-"+this.state.minimized).addClass("motopress-dialog-"+this.state.restored)}})});
steal("jquery/class",function(c){c.Class("CE.WPAudio",{myThis:null},{frame:null,propertyAudio:null,propertyAudioTitle:null,init:function(){CE.WPAudio.myThis=this;this.frame=parent.wp.media({id:"motopress-audio-library",multiple:!1,describe:!1,toolbar:"select",sidebar:"settings",content:"upload",router:"browse",menu:"default",searchable:!0,filterable:!1,sortable:!1,title:"Set audio file",button:{text:"Set audio file"},library:{type:"audio"},contentUserSetting:!0,syncSelection:!0});this.frame.on("open",
this.proxy("onOpen"));this.frame.on("select",this.proxy("setAudio"));this.frame.on("close",this.proxy("onClose"))},onOpen:function(){var a;this.propertyAudio=CE.Dialog.myThis.element.find(".motopress-property-audio-id");this.propertyAudioTitle=CE.Dialog.myThis.element.find(".motopress-property-audio-title");a=this.propertyAudio.val();a=null!==a?parent.wp.media.attachment(a):parent.wp.media.attachment();a.fetch();this.frame.state().get("selection").add(a)},setAudio:function(){var a=this.frame.state().get("selection").models[0].attributes;
this.propertyAudio.val(a.id);this.propertyAudioTitle.val(a.title);this.propertyAudio.trigger("change")},onClose:function(){c("."+CE.Dialog.myThis.dialogClass).focus();var a=c(parent.document).find("html, body");a.addClass("motopress-ce-jumping-fix");var b=setTimeout(function(){a.removeClass("motopress-ce-jumping-fix");clearTimeout(b)},0)}});c.Class("CE.WPVideo",{myThis:null},{frame:null,propertyVideo:null,init:function(){CE.WPVideo.myThis=this;this.frame=parent.wp.media({id:"motopress-video-library",
multiple:!1,describe:!1,toolbar:"select",sidebar:"settings",content:"upload",router:"browse",menu:"default",searchable:!0,filterable:!1,sortable:!1,title:localStorage.getItem("CEVideoLibraryText"),button:{text:localStorage.getItem("CEVideoLibraryText")},library:{type:"video"},contentUserSetting:!0,syncSelection:!0});this.frame.on("open",this.proxy("onOpen"));this.frame.on("select",this.proxy("setVideo"));this.frame.on("close",this.proxy("onClose"))},onOpen:function(){this.propertyVideo=CE.Dialog.myThis.element.find("[data-motopress-open-video-lib=1]")},
setVideo:function(){var a=this.frame.state().get("selection").models[0].attributes.url,b=this.propertyVideo.controller();b.set(a);b.element.removeAttr("data-motopress-open-video-lib");b.element.trigger("change")},onClose:function(){c("."+CE.Dialog.myThis.dialogClass).focus();this.propertyVideo.removeAttr("data-motopress-open-video-lib");var a=c(parent.document).find("html, body");a.addClass("motopress-ce-jumping-fix");var b=setTimeout(function(){a.removeClass("motopress-ce-jumping-fix");clearTimeout(b)},
0)}})});
steal("jquery/class",function(c){c.Class("CE.Style",{gridProps:null,props:{margin:{type:"margin",label:localStorage.getItem("CEMarginLabel"),sides:["top","bottom","left","right"],values:["none",0,10,15,20,25,50,100],"default":["none","none","none","none"],classPrefix:"motopress-margin-",regExp:null},mp_style_classes:{type:"select2",label:localStorage.getItem("CEStyleClassesLabel"),description:localStorage.getItem("CEStyleClassesLabelDesc")}},globalPredefinedClasses:{},setup:function(){this.props.margin.regExp=new RegExp("^"+
this.props.margin.classPrefix+"(?:|("+this.props.margin.sides.join("|")+")-)("+this.props.margin.values.slice(1).join("|")+")$","i");this.gridProps=c.extend(!0,{},this.props);this.gridProps.margin.sides.splice(2);this.gridProps.margin["default"].splice(2);delete this.gridProps.margin.regExp}},{})});
steal("jquery/controller",function(c){c.Controller("CE.Ctrl",{processValue:function(a,b,c){(a="undefined"!==typeof c&&c&&"undefined"===typeof a?b:a)||(a="");return String(a)}},{name:null,dependency:!1,isChild:!1,disabled:!1,isStyle:!1,init:function(a,b){this.name=b.name;b.hasOwnProperty("dependency")&&(this.dependency=b.dependency);b.hasOwnProperty("isChild")&&(this.isChild=b.isChild);b.hasOwnProperty("disabled")&&(this.disabled="true"===b.disabled);b.hasOwnProperty("isStyle")&&(this.isStyle=b.isStyle)},
get:function(){},set:function(){},change:function(a,b){if(!this.isChild){var d=this,e=null;CE.Dialog.myThis.settingsTab.find('> .motopress-settings-forms > [data-motopress-parameter] > .motopress-controls, > .motopress-settings-forms > [data-motopress-parameter] > :not(".motopress-property-label, .motopress-property-description, hr") > .motopress-controls').each(function(){e=c(this).controller();e.dependency&&d.name===e.dependency.parameter&&(d.get()!=e.dependency.value?c(this).closest("[data-motopress-parameter]").addClass("motopress-hide"):
c(this).closest("[data-motopress-parameter]").removeClass("motopress-hide"))})}var f=CE.Dialog.myThis.shortcode.controller(CE.Controls);this.isStyle?f.saveStyle(this):f.saveSettings(this)}});CE.Ctrl("CE.CtrlInput",{},{get:function(){return this.element.val()},set:function(a,b,c){a=CE.Ctrl.processValue(a,b,c);this.element.val(a)}});CE.Ctrl("CE.CtrlSpinner",{listensTo:["customize"]},{min:null,max:null,step:1,init:function(a,b){this._super(a,b);b.hasOwnProperty("min")&&(this.min=b.min);b.hasOwnProperty("max")&&
(this.max=b.max);b.hasOwnProperty("step")&&(this.step=b.step)},customize:function(a,b){var c=this;a.spinner({disabled:this.disabled,min:this.min,max:this.max,step:this.step,spin:function(b,f){var g=c.get(),h=setTimeout(function(){a.trigger("change",g);clearTimeout(h)},0)}})},change:function(a,b,c){var e=this.get();null!==e&&c!==e&&e>=this.min&&e<=this.max&&0===(e/this.step).toFixed(12)%1&&CE.Ctrl.prototype.change.apply(this,[a,b])},get:function(){return this.element.spinner("value")},set:function(a,
b,c){a=CE.Ctrl.processValue(a,b,c);"undefined"!==typeof this.element.data("uiSpinner")?this.element.spinner("value",a):this.element.val(a)}});CE.Ctrl("CE.CtrlLink",{},{get:function(){return c(".motopress-property-link-input",this.element).val()},set:function(a,b,d){a=CE.Ctrl.processValue(a,b,d);c(".motopress-property-link-input",this.element).val(a)},".motopress-property-button-default click":function(a){var b=c(".motopress-property-link-input",this.element);CE.Link.myThis.open(b,{title:!1,target:!1},
function(a){b.val!=a.href&&(b.val(a.href),b.trigger("change"))},CE.Link.myThis.wpCancelButtonHandler);return!1}});CE.Ctrl("CE.CtrlTextarea",{},{get:function(){return this.element.val()},set:function(a,b,c){a=CE.Ctrl.processValue(a,b,c);this.element.val(a)}});CE.Ctrl("CE.CtrlTextarea64",{},{get:function(){return parent.MP.Utils.base64_encode(this.element.val())},set:function(a,b,c){a=CE.Ctrl.processValue(a,b,c);this.element.val(parent.MP.Utils.base64_decode(a))}});CE.Ctrl("CE.CtrlTextareaTable",{},
{get:function(){return parent.MP.Utils.nl2br(this.element.val())},set:function(a,b,c){a=CE.Ctrl.processValue(a,b,c);a=a.replace(/^<p>/,"").replace(/<\/p>$/,"");a=parent.MP.Utils.br2nl(a);this.element.val(a)}});CE.Ctrl("CE.CtrlTextareaTinymce",{},{textarea:null,currentShortcode:null,init:function(a,b){this._super(a,b);this.textarea=a.children(".motopress-property-textarea");this.currentShortcode=b.currentShortcode},get:function(){return this.textarea.val()},set:function(a,b,c){a=CE.Ctrl.processValue(a,
b,c);this.textarea.val(a)},".motopress-property-button-default click":function(a,b){var c=parent.CE.CodeModal.myThis.editor;parent.CE.CodeModal.currentShortcode=this.currentShortcode;parent.CE.CodeModal.currentTextareaTinymce=this.element;var e=this.get();e.length&&(null!==c&&c.setContent(e,{format:"html"}),parent.CE.CodeModal.myThis.content.val(e));parent.CE.CodeModal.myThis.saveHandler=this.saveHandler;parent.CE.CodeModal.myThis.element.data("modal").closeDialog=!1;parent.CE.CodeModal.myThis.element.modal("show")},
saveHandler:function(a){a=parent.CE.CodeModal.myThis;a.switchVisual();var b=parent.CE.CodeModal.currentTextareaTinymce.controller(),c=a.editor.getContent({format:"html"});c.length&&(b.set(c),parent.CE.CodeModal.currentTextareaTinymce.trigger("change"));a.element.modal("hide")}});CE.Ctrl("CE.CtrlAudio",{},{init:function(a,b){this._super(a,b);c(".motopress-property-audio-title",this.element).val(b.audioTitle).attr("disabled","disabled")},get:function(){return c(".motopress-property-audio-id",this.element).val()},
set:function(a,b,d){a=CE.Ctrl.processValue(a,b,d);c(".motopress-property-audio-id",this.element).val(a)},".motopress-property-button-default click":function(a){CE.WPAudio.myThis.frame.open(this)}});CE.Ctrl("CE.CtrlMediaVideo",{},{init:function(a,b){this._super(a,b)},get:function(){return c(".motopress-property-video-url",this.element).val()},set:function(a,b,d){a=CE.Ctrl.processValue(a,b,d);c(".motopress-property-video-url",this.element).val(a)},".motopress-property-button-default click":function(a){this.element.attr("data-motopress-open-video-lib",
1);CE.WPVideo.myThis.frame.open(this)}});CE.Ctrl("CE.CtrlImageGeneral",{listensTo:["dialogOpen"]},{autoOpen:!1,init:function(a,b){this._super(a,b);b.isNew&&"true"===b.autoOpen&&(this.autoOpen=!0)}});CE.CtrlImageGeneral("CE.CtrlImage",{thumbnail:parent.MP.Settings.pluginRootUrl+"/"+parent.MP.Settings.pluginName+"/images/ce/imageThumbnail.png"+parent.motopress.pluginVersionParam},{id:null,shortcode:null,init:function(a,b){this._super(a,b);this.shortcode=b.shortcode},dialogOpen:function(a){this.autoOpen&&
(a.find(".motopress-thumbnail-crop").trigger("click"),this.autoOpen=!1)},get:function(){return null!==this.id?this.id:""},set:function(a,b,d){if(c.isPlainObject(a)&&a.hasOwnProperty("id")&&a.hasOwnProperty("src"))this.id=a.id,this.setThumbnail(a.src,b,d),a.hasOwnProperty("full")&&(this.setFullSrc(a.full),this.shortcode.css("background-image","url('"+a.full+"')"));else if(c.isNumeric(a)&&null===this.id){this.showPreloader();this.id=a;var e=this;c.ajax({url:parent.motopress.ajaxUrl,type:"POST",dataType:"text",
data:{action:"motopress_ce_get_attachment_thumbnail",nonce:parent.motopressCE.nonces.motopress_ce_get_attachment_thumbnail,postID:parent.motopressCE.postID,id:e.id},success:function(a){a=c.parseJSON(a);e.setThumbnail(a.medium,b,d);e.setFullSrc(a.full);e.hidePreloader()},error:function(a){a=c.parseJSON(a.responseText);a.debug?console.log(a.message):(parent.MP.Flash.setFlash(a.message,"error"),parent.MP.Flash.showMessage());e.setThumbnail(CE.CtrlImage.thumbnail,b,d);e.hidePreloader()}})}},setThumbnail:function(a,
b,c){a=CE.Ctrl.processValue(a,b,c);this.element.find(".motopress-thumbnail").attr("src",a)},setFullSrc:function(a){this.element.find(".motopress-thumbnail").attr("data-full-src",a)},".motopress-thumbnail-crop click":function(a,b){a.hasClass(CE.Shortcode.preloaderClass)||(this.element.attr("data-motopress-open-img-lib",1),CE.ImageLibrary.myThis.frame.open())},".motopress-icon-trash click":function(){this.id=null;this.element.find(".motopress-thumbnail").attr("src",CE.CtrlImage.thumbnail);this.hideTools();
null!==this.shortcode&&(this.shortcode.css("background-image",""),this.element.find(".motopress-thumbnail").removeAttr("data-full-src"));this.element.trigger("change")},showTools:function(){this.element.children(".motopress-image-tools").show()},hideTools:function(){this.element.children(".motopress-image-tools").hide()},showPreloader:function(){this.element.children(".motopress-thumbnail-crop").addClass(CE.Shortcode.preloaderClass).children(".motopress-thumbnail").css("visibility","hidden");this.hideTools()},
hidePreloader:function(){var a=this.element.children(".motopress-thumbnail-crop"),b=a.children(".motopress-thumbnail");a.removeClass(CE.Shortcode.preloaderClass);b.css("visibility","visible");b.attr("src")!==CE.CtrlImage.thumbnail&&this.showTools()}});CE.CtrlImageGeneral("CE.CtrlImageSlider",{},{ids:null,init:function(a,b){this._super(a,b)},dialogOpen:function(a){this.autoOpen&&(a.trigger("click"),this.autoOpen=!1)},get:function(){return null!==this.ids?this.ids:""},set:function(a,b,d){a=CE.Ctrl.processValue(a,
b,d);b=typeof a;if("object"===b){b="";d=a.length;for(var e=0;e<d;e++)b=e<d-1?b+(a[e]+","):b+a[e];this.ids=b}else if("number"===b||"string"===b)this.ids=c.trim(a)},getArray:function(){var a=[];if(this.ids)for(var a=this.ids.split(","),b,c=0;c<a.length;c++)(b=parseInt(a[c],10))?a[c]=b:delete a[c];return a},click:function(a){a.hasClass(CE.Shortcode.preloaderClass)||CE.WPGallery.myThis.open(this)}});CE.Ctrl("CE.CtrlVideo",{},{init:function(a,b){this._super(a,b);this.element.on("paste",function(){var b=
setTimeout(function(){a.blur();clearTimeout(b)},0)})},get:function(){return this.element.val()},set:function(a,b,c){a=CE.Ctrl.processValue(a,b,c);this.element.val(a)}});CE.Ctrl("CE.CtrlCheckbox",{},{get:function(){return this.element.is(":checked").toString()},set:function(a,b,c){a=CE.Ctrl.processValue(a,b,c);"true"===a?this.element.attr("checked","checked"):this.element.removeAttr("checked")}});CE.CtrlCheckbox("CE.CtrlGroupCheckbox",{},{change:function(a,b){a.is(":checked")&&a.closest(".motopress-property-group-accordion-item").siblings().find('.motopress-property-group-accordion-item-content > [data-motopress-parameter="'+
this.name+'"] > .motopress-controls').each(function(){var a=c(this).controller();"true"===a.get()&&(a.set("false"),CE.Ctrl.prototype.change.apply(a,[c(this),b]))});CE.Ctrl.prototype.change.apply(this,[a,b])}});CE.Ctrl("CE.CtrlSelect",{listensTo:["customize"],init:function(){c("body").on("click",".motopress-property-select:not(.open) > .dropdown-toggle",function(){var a=c(this).next(),b=a.find("ul > li").length;a.find("li:eq("+(6<=b?5:b-1)+") > a").focus();a.find("ul > li > a.motopress-dropdown-selected").focus()})},
setSelected:function(a){var b=a.find("option"),b=b.index(b.filter(":selected"));a=a.next().find(".dropdown-menu > ul > li");a.children("a.motopress-dropdown-selected").removeClass("motopress-dropdown-selected");a.filter('[rel="'+b+'"]').children("a").addClass("motopress-dropdown-selected")}},{get:function(){return this.element.val()},set:function(a,b,c){a=CE.Ctrl.processValue(a,b,c);this.element.find('[value="'+a+'"]').attr("selected","selected")},change:function(a){this._super();CE.CtrlSelect.setSelected(a)},
customize:function(a){"undefined"!==typeof a.data("selectpicker")&&(a.next().remove(),c.removeData(a[0],"selectpicker"));a.selectpicker({size:6});var b=a.next();b.removeClass("ce_ctrl_select motopress-controls");b=b.children(".dropdown-toggle");b.html(b.html().replace(/&nbsp;/g,""));CE.CtrlSelect.setSelected(a)}});CE.Ctrl("CE.CtrlSelect2",{listensTo:["customize"]},{isPreview:!1,previewClass:null,unsetClasses:[],data:null,init:function(a,b){this._super(a,b);this.options.style=CE.LeftBar.myThis.library[this.options.instance.group].objects[this.options.instance.shortcodeName].styles.mp_style_classes},
get:function(){var a=this,b=this.element.select2("data"),d="";this.isPreview&&(b=b.filter(function(b){return-1===c.inArray(b.id,a.unsetClasses)}));b.forEach(function(a,b){a.hasOwnProperty("locked")||!0===a.locked||(d+=""!==d?" "+a.id:a.id)});this.isPreview&&(d+=""!==d?" "+this.previewClass:this.previewClass);return d},set:function(a,b,d){a=CE.Ctrl.processValue(a,b,d);c.isEmptyObject(this.options.style.basic)||(b=this.getBasicClassesString(),a=a?b+" "+a:b);this.options.value=a;this.element.val(a)},
customize:function(a,b){var d=this;this.data=this.getClassesList();a.select2({multiple:!0,separator:" ",closeOnSelect:!1,createSearchChoice:function(a,b){if(/^[-_A-Za-z0-9]+$/.test(a)&&0===c(b).filter(function(){return this.hasOwnProperty("id")?0===this.text.toUpperCase().localeCompare(a.toUpperCase())||0===this.id.toUpperCase().localeCompare(a.toUpperCase()):0!==c(this.children).filter(function(){return 0===this.text.toUpperCase().localeCompare(a.toUpperCase())||0===this.id.toUpperCase().localeCompare(a.toUpperCase())}).length}).length)return{id:a.toLowerCase(),
text:a,custom:!0}},initSelection:function(a,b){b(d.valueToData(d.options.value.split(" ")))},query:function(a){d.options.value=d.element.val();var b={results:[]};c.each(d.data,function(g,h){h.hasOwnProperty("children")?(result={text:h.text,children:[]},result.children=c.makeArray(h.children.filter(function(b){return(0<=b.id.toUpperCase().indexOf(a.term.toUpperCase())||0<=b.text.toUpperCase().indexOf(a.term.toUpperCase()))&&c.inArray(b.id,-1===d.options.value.split(" "))})),result.children.length&&
b.results.push(result)):(0<=h.id.toUpperCase().indexOf(a.term.toUpperCase())||0<=h.text.toUpperCase().indexOf(a.term.toUpperCase()))&&-1===c.inArray(h.id,d.options.value.split(" "))&&b.results.push(h)});a.callback(b)},formatNoMatches:function(){return localStorage.getItem("CEStyleClassesFormatNoMatches")},formatResult:function(a,b){if(a.hasOwnProperty("children"))return a.text;a.hasOwnProperty("disabled")&&a.disabled&&b.attr("title",localStorage.getItem("CELiteTooltipText"));return'<i class="select2-preview-icon" data-value="'+
a.id+'"></i>'+a.text},dropdownCssClass:"select2-control-dropdown"});d.select2el=a.closest(".select2-container").find("");a.on("select2-highlight",function(a){d.unsetClasses=d.getUnsetClasses(a.val)});c(".select2-control-dropdown").off("mouseover",".select2-preview-icon").on("mouseover",".select2-preview-icon",function(){var a=c(this).attr("data-value");d.unsetClasses=d.getUnsetClasses(a);d.isPreview=!0;d.setPreviewClass(a)});c(".select2-control-dropdown").off("mouseleave").on("mouseleave",".select2-preview-icon",
function(){d.isPreview=!1;d.unsetClasses=[];d.setPreviewClass()});a.on("select2-blur",function(a){d.isPreview=!1;d.unsetClasses=[];d.setPreviewClass()});a.on("select2-close",function(a){d.isPreview=!1;d.unsetClasses=[];d.setPreviewClass()});a.on("select2-selecting",function(a){d.isPreview=!1;var b=c(d.element).select2("val"),b=d.excludeGroupValues(b);a.object.hasOwnProperty("custom")&&!0===a.object.custom&&d.data.push({id:a.object.id,text:a.object.text,custom:a.object.custom});d.element.select2("data",
d.valueToData(b))})},valueToData:function(a){var b=this,d=[];c.each(a,function(a,f){c.each(b.data,function(a){b.data[a].hasOwnProperty("children")?c.each(b.data[a].children,function(c){b.data[a].children[c].id===f&&d.push(b.data[a].children[c])}):b.data[a].id===f&&d.push(b.data[a])})});return d},excludeGroupValues:function(a){var b=this;return a=a.filter(function(a){return-1===c.inArray(a,b.unsetClasses)})},setPreviewClass:function(a){this.previewClass=a;this.options.instance.saveStyle(this)},getUnsetClasses:function(a){var b=
[];c.each(this.data,function(d,e){var f=!1;if(e.hasOwnProperty("children")&&(void 0===e.allowMultiple||!1===e.allowMultiple)){c.each(e.children,function(c,d){d.id===a?f=!0:b.push(d.id)});if(f)return!1;b=[]}});return b},getClassesList:function(){var a=this.getPredefinedClasses(),b=""!==this.options.value?this.options.value.split(" "):[],d=this.getGlobalPredefinedClasses(),e=this.getBasicClasses().concat(d,a);b.forEach(function(a,b){0===c(e).filter(function(){var b=!1;return b=this.hasOwnProperty("children")?
0!==c(this.children).filter(function(){return this.hasOwnProperty("id")?0===this.id.localeCompare(a):!1}).length:this.hasOwnProperty("id")?0===this.id.localeCompare(a):!1}).length&&e.push({id:a,text:a})});return e},getBasicClasses:function(){basicClasses=[];c.isEmptyObject(this.options.style.basic)||(this.options.style.basic.hasOwnProperty("class")?basicClasses.push({id:this.options.style.basic["class"],text:this.options.style.basic.label,locked:!0}):c.each(this.options.style.basic,function(a,b){basicClasses.push({id:b["class"],
text:b.label,locked:!0})}));return basicClasses},getBasicClassesString:function(){var a=this.getBasicClasses(),b=[];c.each(a,function(a,c){b.push(c.id)});return b.join(" ")},getPredefinedClasses:function(){var a=[];if(!c.isEmptyObject(this.options.style.predefined)){var b=this.options.style.predefined;for(group in b)if(b[group].hasOwnProperty("values")){var d=[];for(el in b[group].values)d.push({id:b[group].values[el]["class"],text:b[group].values[el].label,disabled:b[group].values[el].hasOwnProperty("disabled")&&
b[group].values[el].disabled});a.push({text:b[group].label,children:d,allowMultiple:b[group].allowMultiple})}else a.push({id:b[group]["class"],text:b[group].label,disabled:b[group].hasOwnProperty("disabled")&&b[group].disabled})}return a},getGlobalPredefinedClasses:function(){var a=[];c.each(CE.Style.globalPredefinedClasses,function(b,d){if(d.hasOwnProperty("values")){var e=[];c.each(d.values,function(a,b){e.push({id:b["class"],text:b.label,disabled:b.hasOwnProperty("disabled")&&b.disabled})});a.push({text:d.label,
children:e,allowMultiple:d.allowMultiple})}else a.push({id:d["class"],text:d.label,disabled:d.hasOwnProperty("disabled")&&d.disabled})});return a}});CE.Ctrl("CE.CtrlEditorButton",{},{dragHandle:null,init:function(a,b){this._super(a,b);this.dragHandle=b.shortcode.parent(".motopress-block-content").next(".motopress-helper").children(".motopress-drag-handle")},click:function(){this.dragHandle.click()}});CE.Ctrl("CE.CtrlColorPicker",{listensTo:["customize","dialogOpen"]},{lastTimerId:null,preview:null,
input:null,init:function(a,b){this._super(a,b);this.preview=a.children(".motopress-property-color-picker-preview");this.input=a.children(".motopress-property-input")},set:function(a,b,c){a=CE.Ctrl.processValue(a,b,c);this.input.val(a);""!==a&&this.preview.css("background-color",a)},get:function(){return this.input.val()},change:function(a,b){},dialogOpen:function(){this.input.iris("hide")},".motopress-property-input click":function(a,b){c(".motopress-property-color-picker>.motopress-property-input").iris("hide");
this.input.iris("show")},".iris-palette-add click":function(a,b){var d=parent.MP.Settings.palettes;d.pop();d.unshift(this.input.iris("option","color"));c.ajax({url:parent.motopress.ajaxUrl,type:"POST",data:{action:"motopress_ce_colorpicker_update_palettes",nonce:parent.motopressCE.nonces.motopress_ce_colorpicker_update_palettes,postID:parent.motopressCE.postID,palettes:d},success:function(a){a=c.parseJSON(a);parent.MP.Settings.palettes=a.palettes;c(".motopress-property-color-picker>.motopress-property-input").iris("option",
"palettes",parent.MP.Settings.palettes)},error:function(a){a=c.parseJSON(a.responseText);a.debug?console.log(a.message):(parent.MP.Flash.setFlash(a.message,"error"),parent.MP.Flash.showMessage())}})},customize:function(a,b){var c=this;this.input.iris({change:function(e,f){c.preview.css("background-color",f.color.toString());clearTimeout(c.lastTimerId);c.lastTimerId=setTimeout(function(){CE.Ctrl.prototype.change.apply(c,[a,b])},1E3)},palettes:parent.MP.Settings.palettes,width:213})}});CE.Ctrl("CE.CtrlSlider",
{},{slider:null,span:null,init:function(a,b){var c=this;this._super(a,b);this.slider=a.children(".motopress-property-slider");this.span=a.children(".motopress-property-slider-value");this.slider.slider({range:"min",min:parseInt(b.min),max:parseInt(b.max),step:parseInt(b.step),value:parseInt(b.value),slide:function(a,b){c.span.html(b.value)},change:function(b,c){"undefined"!==typeof b.handleObj&&a.trigger("change")},disabled:"true"==b.disabled})},set:function(a,b,c){a=CE.Ctrl.processValue(a,b,c);this.span.text(a);
this.slider.slider("value",a)},get:function(){return this.slider.slider("option","value")}});CE.Ctrl("CE.CtrlRadioButtons",{},{init:function(a,b){this._super(a,b);this.element.buttonset()},set:function(a,b,c){a="undefined"!==typeof a?a:b;this.element.find(':radio[value="'+a+'"]').attr("checked",!0);this.element.find(':radio[value="'+a+'"]').button("refresh")},get:function(){return this.element.find(":radio:checked").val()}});CE.Ctrl("CE.CtrlGroup",{listensTo:["render"]},{currentSpan:null,shortcode:null,
group:null,shortcodeName:null,label:null,accordion:null,button:null,oldItemIndex:null,init:function(a,b){this._super(a,b);this.currentSpan=b.currentSpan;this.shortcode=b.shortcode;this.group=this.shortcode.attr("data-motopress-group");this.shortcodeName=this.shortcode.attr("data-motopress-shortcode");this.label=b.label;this.accordion=a.children(".motopress-property-group-accordion");this.button=a.find("> .motopress-property-button-wrapper > .motopress-property-button-default")},render:function(a,
b,d){this.updateLabel();var e=this;b=this.shortcode.attr("data-motopress-active-item");b=d&&"undefined"!==typeof b?parseInt(b):!1;this.accordion.accordion({active:b,header:"> div > h3",heightStyle:"content",collapsible:!0,beforeActivate:function(a,b){a.hasOwnProperty("originalEvent")&&a.originalEvent.hasOwnProperty("target")&&c(a.originalEvent.target).hasClass("motopress-property-group-accordion-item-remove")&&a.preventDefault()},activate:function(a,b){var c=e.shortcode.children("div"),d=!1;if(b.newHeader.length&&
!b.oldHeader.length||b.newHeader.length&&b.oldHeader.length&&!b.newHeader.is(b.oldHeader))switch(d=b.newHeader.parent(".motopress-property-group-accordion-item").index(),e.shortcode.attr("data-motopress-active-item",d),e.shortcodeName){case "mp_tabs":try{c.tabs("option","active",d)}catch(l){}break;case "mp_accordion":try{c.accordion("option","active",d)}catch(n){}}else switch(e.shortcodeName){case "mp_accordion":e.shortcode.attr("data-motopress-active-item",d);try{c.accordion("option","active",d)}catch(m){}}}}).sortable({axis:"y",
handle:"h3 > .ui-accordion-header-icon",update:function(b,c){var d=c.item.closest(".motopress-property-group-accordion-item").index(),k=e.shortcode.children("div").children("[data-motopress-shortcode]");e.oldItemIndex<d?k.eq(e.oldItemIndex).insertAfter(k.eq(d)):k.eq(e.oldItemIndex).insertBefore(k.eq(d));a.trigger("change")},start:function(a,b){e.oldItemIndex=b.item.closest(".motopress-property-group-accordion-item").index()}});this.disabled&&(!d||d&&this.accordion.children(".motopress-property-group-accordion-item").length)&&
this.button.attr("disabled",!0)},change:function(a,b,d){this.updateLabel();var e=this,f="";this.shortcode.children("div").children("[data-motopress-shortcode]").each(function(){if(d&&"true"===c(this).attr("data-motopress-new")){var a="undefined"!==typeof c(this).attr("data-motopress-parameters")?c(this).attr("data-motopress-parameters"):null,b="undefined"!==typeof c(this).attr("data-motopress-styles")?c(this).attr("data-motopress-styles"):null,k=e.currentSpan.controller();k.setDefaultAttrs(a,c(this));
k.setDefaultStyle(b);c(this).removeAttr("data-motopress-new")}f=parent.CE.Save.getShortcode(f,c(this))});this.shortcode.attr("data-motopress-content",f);CE.Ctrl.prototype.change.apply(this,[a,b])},"> .motopress-property-button-wrapper > .motopress-property-button-default click":function(a,b,d){b.stopPropagation();if(!this.disabled||"undefined"!==typeof d){a=c("<div />",{"data-motopress-new":"true"});b=null;switch(this.shortcodeName){case "mp_tabs":b=CE.LeftBar.myThis.library[this.group].objects.mp_tab;
break;case "mp_accordion":b=CE.LeftBar.myThis.library[this.group].objects.mp_accordion_item}null!==b&&CE.LeftBar.myThis.setAttrs(a,this.group,b);if("undefined"!==typeof d){b=c();for(var e=0;e<d;e++)b=b.add(a.clone());a=b}b=this.shortcode.children("div");b.append(a);"undefined"===typeof d&&(d=b.children("[data-motopress-shortcode]").index(c(a).eq(-1)),this.shortcode.attr("data-motopress-active-item",d));d=this.currentSpan.controller();d.generateSettingsForms(void 0,void 0,this.name);d.displaySettings(!0,
void 0,void 0,this.name,!0)}},".motopress-property-group-accordion-item-remove click":function(a,b){b.stopPropagation();var c=a.closest(".motopress-property-group-accordion-item").index();this.shortcode.children("div").children("[data-motopress-shortcode]:eq("+c+")").remove();this.shortcode.removeAttr("data-motopress-active-item");c=this.currentSpan.controller();c.generateSettingsForms(void 0,void 0,this.name);c.displaySettings(!1,void 0,void 0,this.name,!0)},updateLabel:function(){if(this.label.hasOwnProperty("parameter")){var a=
this;this.accordion.find(".motopress-property-group-accordion-item-label-text").each(function(){var b=c(this).parent(".motopress-property-group-accordion-item-label").next(".motopress-property-group-accordion-item-content").find('[data-motopress-parameter="'+a.label.parameter+'"] > .motopress-controls, [data-motopress-parameter="'+a.label.parameter+'"] > :not(".motopress-property-label, .motopress-property-description, hr") > .motopress-controls');b.length&&c(this).text(b.controller().get())})}}});
CE.Ctrl("CE.CtrlMargin",{},{margin:null,init:function(a,b){this._super(a,b);this.margin=b.margin},get:function(){var a=[],b=this,d=!0,b=this;c.each(b.margin.sides,function(c,f){var g=b.element.find('[data-motopress-margin-side="'+f+'"] .'+b.margin.classPrefix+"value").text();a.push(g);g!==b.margin.values[0]&&(d=!1)});return d?"":a.join(",")},set:function(a,b,d){a=CE.Ctrl.processValue(a,b,d);if("string"===typeof a){if(!a.length)return;a=a.split(",")}var e=this;c.each(a,function(a,b){var c=parseInt(b);
isNaN(c)||(b=c);var d=e.element.find('[data-motopress-margin-side="'+e.margin.sides[a]+'"]'),c=d.find("."+e.margin.classPrefix+"icon"),l=d.find("."+e.margin.classPrefix+"value"),d=d.find("."+e.margin.classPrefix+"values");l.text(b);d.removeAttr("data-motopress-margin-disabled");d.filter('[data-motopress-margin-value="'+b+'"]').attr("data-motopress-margin-disabled","");b!==e.margin["default"][a]?(c.attr("data-motopress-margin-active",""),l.attr("data-motopress-margin-active","")):(c.removeAttr("data-motopress-margin-active"),
l.removeAttr("data-motopress-margin-active"))})},".motopress-margin-values click":function(a){if("undefined"===typeof a.attr("data-motopress-margin-disabled")){var b=a.closest("[data-motopress-margin-side]"),c=b.index(),e=b.find("."+this.margin.classPrefix+"icon"),f=b.find("."+this.margin.classPrefix+"value"),b=b.find("."+this.margin.classPrefix+"values"),g=a.text(),h=parseInt(g);isNaN(h)||(g=h);f.text(g);b.removeAttr("data-motopress-margin-disabled");a.attr("data-motopress-margin-disabled","");g!==
this.margin["default"][c]?(e.attr("data-motopress-margin-active",""),f.attr("data-motopress-margin-active","")):(e.removeAttr("data-motopress-margin-active"),f.removeAttr("data-motopress-margin-active"));this.element.trigger("change")}},getClasses:function(a){var b=[];if("undefined"!==typeof a&&a.length){"string"===typeof a&&(a=a.split(","));var d=[];c.each(a,function(a,b){-1===c.inArray(b,d)&&d.push(b)});var e=1===d.length?!0:!1;if(4===a.length&&e&&d[0]!==this.margin.values[0])b.push(this.margin.classPrefix+
d[0]);else{var f=this;c.each(a,function(a,c){c!==f.margin["default"][a]&&b.push(f.margin.classPrefix+f.margin.sides[a]+"-"+c)})}}return b.join(" ")}})});
steal("jquery/class",function(c){c.Class("CE.CtrlTemplates",{createLegend:function(a){return"undefined"!==typeof a&&a.length?(a=c("<div />",{"class":"motopress-property-legend",html:a}),c.merge(a,c("<hr />"))):null},createLabel:function(a){return c("<label />",{"class":"motopress-property-label",text:a})},createDescription:function(a){a=c("<div />",{"class":"motopress-property-description",html:a});return c.merge(a,c("<hr />"))},createInput:function(a,b,d,e){"undefined"===typeof b&&(b=null);"undefined"===
typeof d&&(d="text");"undefined"===typeof e&&(e="input");var f={};if(a.hasOwnProperty("disabled")){var g="true"===a.disabled;g&&(f.disabled=g)}b=c("<input />",{"class":"motopress-property-"+e,type:d,name:b});this.setAttrs(b,a,f);return b},createLink:function(a,b){var d=c("<div />",{"class":"motopress-property-link"}),e=this.createInput(a,b,void 0,"link-input"),f=this.createButton(a);d.append(e,f);this.setAttrs(d,a,{});return d},createMedia:function(a,b){"undefined"===typeof b&&(b=null);var d="",e=
{},f=c("<div />",{"class":"motopress-property-link"});switch(a.type){case "audio":this.createInput(a,b,"hidden","audio-id").appendTo(f);d="audio-title";break;case "media-video":d="video-url"}var d=this.createInput(a,b,"text",d).appendTo(f),g=this.createButton(a,b).appendTo(f);this.setAttrs(d,a,e);this.setAttrs(g,a,e);return f},createTextarea:function(a){var b={rows:5,cols:10};if(a.hasOwnProperty("disabled")){var d="true"===a.disabled;d&&(b.disabled=d)}d=c("<textarea />",{"class":"motopress-property-textarea"});
this.setAttrs(d,a,b);return d},createTextareaTinyMCE:function(a){var b=this.createTextarea(a);a=this.createButton(a);return c("<div />",{"class":"motopress-property-textarea-tinymce"}).append(b,a)},createImage:function(a){var b=c("<div />",{"class":"motopress-property-image"}),d=c("<div />",{"class":"motopress-image-tools"});c("<div />",{"class":"motopress-default motopress-icon-trash motopress-icon-white"}).appendTo(d);a.hasOwnProperty("value")&&a.value||d.hide();var e=c("<div />",{"class":"motopress-thumbnail-crop"}),
f=c("<img />",{src:CE.CtrlImage.thumbnail,"class":"motopress-thumbnail"}).appendTo(e);b.append(e,d);a.hasOwnProperty("disabled")&&"true"===a.disabled&&b.append(c("<div />",{"class":"motopress-image-disabled"}));this.setAttrs(f,a,{});return b},createVideo:function(a,b){"undefined"===typeof b&&(b=null);var c=this.createInput(a,b,"text","video");this.setAttrs(c,a,{});return c},createCheckbox:function(a,b){"undefined"===typeof b&&(b=null);var c=this.createInput(a,b,"checkbox","checkbox-input motopress-property-input");
this.setAttrs(c,a,{});return c},createSelect:function(a,b){"undefined"===typeof b&&(b=null);var d={};if(a.hasOwnProperty("disabled")){var e="true"===a.disabled;e&&(d.disabled=e)}var f=c("<select />",{"class":"motopress-property-select",name:b});c.each(a.list,function(a,b){f.append(c("<option />",{value:a,text:b}))});this.setAttrs(f,a,d);return f},createColorSelect:function(a,b){"undefined"===typeof b&&(b=null);var d={};if(a.hasOwnProperty("disabled")){var e="true"===a.disabled;e&&(d.disabled=e)}var f=
c("<select />",{"class":"motopress-property-select color-select",name:b}),g="undefined"===typeof a["class-prefix"]?"":a["class-prefix"];c.each(a.list,function(a,b){var d="string"==typeof a?a.toLowerCase():"";f.append(c("<option />",{value:a,text:b}).attr("data-content",'<span class="color '+g+d+'"></span><span>'+b+"</span>"))});this.setAttrs(f,a,d);return f},createButton:function(a,b,d){"undefined"===typeof b&&(b=null);"undefined"!==typeof d&&d||(d="default");var e={};if(a.hasOwnProperty("disabled")){var f=
"true"===a.disabled;f&&(e.disabled=f)}b=c("<button />",{"class":"motopress-property-button-"+d,text:a.text,name:b});this.setAttrs(b,a,e);return b},createColorPicker:function(a,b){var d=c("<div>",{"class":"motopress-property-color-picker-preview"}),e=this.createInput(a,b),d=c("<div />",{"class":"motopress-property-color-picker"}).append(d,e);this.setAttrs(d,a,{});return d},createSlider:function(a,b){var d=c("<div>",{"class":"motopress-property-slider"}),e=c("<span>",{type:"text","class":"motopress-property-slider-value",
text:a["default"]}),f=c("<div>",{"class":"motopress-property-slider"});d.appendTo(f);e.appendTo(f);return f},createRadioButtons:function(a){var b=this,d={};if(a.hasOwnProperty("disabled")){var e="true"===a.disabled;e&&(d.disabled=e)}var f=c("<div />",{"class":"motopress-property-radio-buttons"}),g=parent.MP.Utils.uniqid(),h=0;c.each(a.list,function(e,l){var n=c("<input />",{type:"radio",id:g+h,name:g,value:e});b.setAttrs(n,a,d);var m=c("<label />",{"for":g+h,text:l});f.append(n,m);h++});this.setAttrs(f,
a,d);return f},createGroup:function(a){var b=c("<div />",{"class":"motopress-property-group"});c("<div />",{"class":"motopress-property-group-accordion"}).appendTo(b);var d=c("<div />",{"class":"motopress-property-button-wrapper"}).appendTo(b),e=c.extend({},a);a.hasOwnProperty("disabled")&&"true"===a.disabled&&(delete e.disabled,c("<div />",{"class":"motopress-property-disabled"}).appendTo(d));this.createButton(e).appendTo(d);this.setAttrs(b,a,{});return b},createItem:function(a,b){var d=c("<span />",
{"class":"motopress-property-group-accordion-item-label-text",text:a.label["default"]+" "+b}),e=c("<span />",{"class":"motopress-property-group-accordion-item-remove"}),d=c("<h3 />",{"class":"motopress-property-group-accordion-item-label"}).append(d,e),e=c("<div />",{"class":"motopress-property-group-accordion-item-content"});return c("<div />",{"class":"motopress-property-group-accordion-item"}).append(d,e)},createMargin:function(a){var b=c("<table />",{"class":"motopress-property-margin"});c.each(a.sides,
function(d,e){var f=c("<tr />",{"data-motopress-margin-side":e}).appendTo(b);c("<td />").append(c("<i />",{"class":a.classPrefix+"icon "+a.classPrefix+"icon-"+e})).appendTo(f);c("<td />").append(c("<div />",{"class":a.classPrefix+"value",text:a["default"][d]})).appendTo(f);c.each(a.values,function(b,d){c("<td />").append(c("<div />",{"class":a.classPrefix+"values","data-motopress-margin-value":d,text:d})).appendTo(f)})});return b},setAttrs:function(a,b,d){"object"!==typeof b&&(b={});c.each(d,function(c,
d){"undefined"!==typeof b[c]?a.attr(c,b[c]):null!==d&&a.attr(c,d)})}},{})});
steal("jquery/controller",function(c){c.Controller("CE.Shortcode",{listensTo:["render"],preloaderClass:"motopress-small-preload"},{group:null,isGrid:!1,shortcodeName:null,shortcode:null,child:null,init:function(a,b){this.group=a.attr("data-motopress-group");this.isGrid=this.group===CE.LeftBar.myThis.library.mp_grid.id;this.shortcodeName=a.attr("data-motopress-shortcode");this.shortcode=a;this.isGrid||(this.child=this.shortcode.children("div"))},renderShortcode:function(a){if(!this.isGrid){a="undefined"!==
typeof a&&a?!0:!1;var b=this,d=this.element.parent("."+CE.DragDrop.myThis.blockContent.attr("class")).next("."+CE.DragDrop.myThis.helper.attr("class")).children("."+CE.DragDrop.myThis.dragHandle.attr("class"));d.addClass(CE.Shortcode.preloaderClass);var e=this.element.attr("data-motopress-close-type"),f="undefined"!==typeof this.element.attr("data-motopress-wrap-render")?this.element.attr("data-motopress-wrap-render"):null,g="undefined"!==typeof this.element.attr("data-motopress-parameters")?this.element.attr("data-motopress-parameters"):
null,h="undefined"!==typeof this.element.attr("data-motopress-styles")?this.element.attr("data-motopress-styles"):null;a&&g&&(g=this.setDefaultAttrs(g));a&&h&&(h=this.setDefaultStyle(h));var k="undefined"!==typeof this.element.attr("data-motopress-content")?this.element.attr("data-motopress-content").replace(/\[\]/g,"["):null;"undefined"!==typeof this.element.attr("data-motopress-active-item")&&(g=c.parseJSON(g),g.active={value:this.element.attr("data-motopress-active-item")},g=JSON.stringify(g));
c.ajax({url:parent.motopress.ajaxUrl,type:"POST",dataType:"html",data:{action:"motopress_ce_render_shortcode",nonce:parent.motopressCE.nonces.motopress_ce_render_shortcode,postID:parent.motopressCE.postID,closeType:e,shortcode:b.shortcodeName,wrapRender:f,parameters:g,styles:h,content:k},success:function(e){var f=b.element.closest('[class*="span"].motopress-span');if(!f.parent(".motopress-content-wrapper > .mp-row-fluid.motopress-row").length){var f=f.parent(".mp-row-fluid.motopress-row").nextAll(".motopress-handle-middle-in:last"),
g=parseInt(f.css("min-height"));f.height(g)}c(".motopress-content-wrapper > .motopress-handle-middle-in:last").height("");b.element.html(e);b.child=b.element.children("div");e=b.shortcode.find("img");var h=e.length,k=0;if(h)e.on("load",function(){k++;k===h&&b.element.trigger("render")});if(a)switch(b.shortcodeName){case "mp_tabs":b.settingsForms.find('> [data-motopress-parameter="tabs"] > .motopress-property-group > .motopress-property-button-wrapper > .motopress-property-button-default').trigger("click",
CE.LeftBar.myThis.library[b.group].objects[b.shortcodeName].parameters.tabs.items.count);break;case "mp_accordion":b.settingsForms.find('> [data-motopress-parameter="accordionItems"] > .motopress-property-group > .motopress-property-button-wrapper > .motopress-property-button-default').trigger("click",CE.LeftBar.myThis.library[b.group].objects[b.shortcodeName].parameters.accordionItems.items.count)}b.element.trigger("render");d.removeClass(CE.Shortcode.preloaderClass);parent.CE.Save.changeContent()},
error:function(a){a=c.parseJSON(a.responseText);a.debug?console.log(a.message):(parent.MP.Flash.setFlash(a.message,"error"),parent.MP.Flash.showMessage());d.removeClass(CE.Shortcode.preloaderClass)}})}},setDefaultAttrs:function(a,b){var d=c.parseJSON(a),e=this.getGeneralAttrs(b),f=this;c.each(d,function(a,c){"undefined"!==typeof c.value&&c.value||("undefined"!==typeof b&&"mp_tab"===b.attr("data-motopress-shortcode")&&"id"===a?c.value=parent.MP.Utils.uniqid():e[a].hasOwnProperty("saveInContent")&&
"true"===e[a].saveInContent?("undefined"===typeof b?f.shortcode:b).attr("data-motopress-content",e[a]["default"]):c.value=e[a]["default"])});this.setShortcodeAttrs(d,b);return JSON.stringify(d)},setDefaultStyle:function(a){"undefined"===typeof a&&(a=this.element.attr("data-motopress-styles"));a=c.parseJSON(a);var b=this.isGrid?CE.Style.gridProps:CE.Style.props;c.extend(!0,b,CE.LeftBar.myThis.library[this.group].objects[this.shortcodeName].styles,b);var d=this;c.each(a,function(a,f){if("undefined"===
typeof f.value||!f.value){var g=b[a]["default"];switch(b[a].type){case "margin":var h=!0;c.each(b[a]["default"],function(c,d){d!==b[a].values[0]&&(h=!1)});g=h?"":g.join(",");break;case "select2":var k=[];CE.LeftBar.myThis.library[d.group].objects[d.shortcodeName].styles.mp_style_classes.hasOwnProperty("default")&&c.each(CE.LeftBar.myThis.library[d.group].objects[d.shortcodeName].styles.mp_style_classes["default"],function(a,b){k.push(b)});g=k.join(" ")}f.value=g}});this.setShortcodeStyle(a);return JSON.stringify(a)}})});
steal("jquery/controller",function(c){CE.Shortcode("CE.Controls",{},{settingsForms:null,styleForms:null,isNew:!1,init:function(a,b){this._super(a,b);this.isNew=b.isNew;this.settingsForms=c("<div />",{"class":"motopress-settings-forms"});this.styleForms=c("<div />",{"class":"motopress-style-forms"});this.generateSettingsForms();this.generateStyleForms()},render:function(a){if(!this.isGrid){if(a||"undefined"===typeof a)CE.Resizer.myThis.updateBottomInHandleMiddle(),CE.Resizer.myThis.updateHandle(),
CE.Resizer.myThis.updateHandleMiddle();CE.Resizer.myThis.updateSplitterHeight(this.element,"render");this.shortcode.find("a").attr("tabindex",-1)}},generateSettingsForms:function(a,b,d){var e=this.getShortcodeAttrs(a),f="undefined"===typeof b?this.settingsForms:b;if(e){var g=this,h=this.getGeneralAttrs(a);if("undefined"!==typeof d){var k={};k[d]=h[d];h=k}var l=null,n=null,m=null,p=null;c.each(h,function(b,d){var h=parent.MP.Utils.uniqid();d.value=e[b].value;n=CE.CtrlTemplates.createLegend(d.legend);
m=CE.CtrlTemplates.createLabel(d.label);p=CE.CtrlTemplates.createDescription(d.description);var k=c("<div />",{"data-motopress-parameter":b,"data-motopress-disabled":d.disabled}),r="undefined"===typeof a?!1:!0;switch(d.type){case "text":l=CE.CtrlTemplates.createInput(d,b);l.ce_ctrl_input({name:b,dependency:d.dependency,isChild:r,disabled:d.disabled});k.append(n,m,l,p);break;case "text-hidden":l=CE.CtrlTemplates.createInput(d,b,"hidden");l.ce_ctrl_input({name:b,dependency:d.dependency,isChild:r,disabled:d.disabled});
k.append(l);break;case "link":l=CE.CtrlTemplates.createLink(d,b);l.ce_ctrl_link({name:b,dependency:d.dependency,isChild:r,disabled:d.disabled});k.append(n,m,l,p);break;case "spinner":l=CE.CtrlTemplates.createInput(d,b,null,"spinner");l.ce_ctrl_spinner({name:b,dependency:d.dependency,isChild:r,disabled:d.disabled,min:d.min,max:d.max,step:d.step});k.append(n,m,l,p);break;case "longtext":l=CE.CtrlTemplates.createTextarea(d);l.ce_ctrl_textarea({name:b,dependency:d.dependency,isChild:r,disabled:d.disabled});
k.append(n,m,l,p);break;case "longtext64":l=CE.CtrlTemplates.createTextarea(d);l.ce_ctrl_textarea64({name:b,dependency:d.dependency,isChild:r,disabled:d.disabled});k.append(n,m,l,p);break;case "longtext-table":l=CE.CtrlTemplates.createTextarea(d);l.ce_ctrl_textarea_table({name:b,dependency:d.dependency,disabled:d.disabled});k.append(n,m,l,p);break;case "longtext-tinymce":l=CE.CtrlTemplates.createTextareaTinyMCE(d);l.ce_ctrl_textarea_tinymce({name:b,dependency:d.dependency,isChild:r,disabled:d.disabled,
currentShortcode:g.element});k.append(n,m,l,p);break;case "image":d.src=d.value;l=CE.CtrlTemplates.createImage(d);l.ce_ctrl_image({name:b,isNew:g.isNew,dependency:d.dependency,isChild:r,autoOpen:d.autoOpen,disabled:d.disabled,shortcode:"parallax_image"!==b||"mp_row"!==g.shortcodeName&&"mp_row_inner"!==g.shortcodeName?null:g.shortcode});k.append(n,m,l,p);break;case "audio":l=CE.CtrlTemplates.createMedia(d);var v=g.child.attr("data-audio-title");l.ce_ctrl_audio({name:b,isNew:g.isNew,dependency:d.dependency,
isChild:r,audioTitle:v,disabled:d.disabled});k.append(n,m,l,p);break;case "media-video":l=CE.CtrlTemplates.createMedia(d);l.ce_ctrl_media_video({name:b,isNew:g.isNew,dependency:d.dependency,isChild:r,disabled:d.disabled});k.append(n,m,l,p);break;case "multi-images":l=CE.CtrlTemplates.createButton(d,null,"default");l.ce_ctrl_image_slider({name:b,isNew:g.isNew,dependency:d.dependency,isChild:r,autoOpen:d.autoOpen,disabled:d.disabled});k.append(n,m,l,p);break;case "video":l=CE.CtrlTemplates.createVideo(d,
b);l.ce_ctrl_video({name:b,dependency:d.dependency,isChild:r,disabled:d.disabled});k.append(n,m,l,p);break;case "checkbox":l=CE.CtrlTemplates.createCheckbox(d);l.ce_ctrl_checkbox({name:b,dependency:d.dependency,isChild:r,disabled:d.disabled});m.addClass("motopress-property-checkbox-label");k.append(n,l,m,p);break;case "group-checkbox":l=CE.CtrlTemplates.createCheckbox(d);l.ce_ctrl_group_checkbox({name:b,dependency:d.dependency,isChild:r,disabled:d.disabled});m.addClass("motopress-property-checkbox-label");
k.append(n,l,m,p);break;case "select":l=CE.CtrlTemplates.createSelect(d);l.ce_ctrl_select({name:b,dependency:d.dependency,isChild:r,disabled:d.disabled});k.append(n,m,l,p);break;case "color-select":l=CE.CtrlTemplates.createColorSelect(d);l.ce_ctrl_select({name:b,dependency:d.dependency,isChild:r,disabled:d.disabled});k.append(n,m,l,p);break;case "editor-button":l=CE.CtrlTemplates.createButton(d,null,"default");l.ce_ctrl_editor_button({name:b,isNew:g.isNew,dependency:d.dependency,isChild:r,shortcode:g.shortcode,
disabled:d.disabled});k.append(n,m,l,p);break;case "color-picker":l=CE.CtrlTemplates.createColorPicker(d,b);l.ce_ctrl_color_picker({name:b,isNew:g.isNew,dependency:d.dependency,isChild:r,shortcode:g.shortcode,disabled:d.disabled});k.append(n,m,l,p);break;case "group":l=CE.CtrlTemplates.createGroup(d);var w=l.children(".motopress-property-group-accordion");l.ce_ctrl_group({name:b,isNew:g.isNew,dependency:d.dependency,isChild:r,disabled:d.disabled,currentSpan:g.element,shortcode:g.shortcode,label:d.items.label});
g.shortcode.attr("data-motopress-wrap-render","true");g.child.children("[data-motopress-shortcode]").each(function(a){a=CE.CtrlTemplates.createItem(d.items,a);var b=a.find(".motopress-property-group-accordion-item-content");w.append(a);g.generateSettingsForms(c(this),b)});k.append(n,m,l,p);break;case "slider":l=CE.CtrlTemplates.createSlider(d);l.ce_ctrl_slider({name:b,isNew:g.isNew,dependency:d.dependency,isChild:r,min:"undefined"===typeof d.min||isNaN(d.min)?0:d.min,max:"undefined"===typeof d.max||
isNaN(d.max)?100:d.max,step:"undefined"===typeof d.step||isNaN(d.step)?1:d.step,value:d.value,disabled:d.disabled});k.append(n,m,l,p);break;case "radio-buttons":l=CE.CtrlTemplates.createRadioButtons(d),l.ce_ctrl_radio_buttons({name:b,dependency:d.dependency,isChild:r,value:d.value,disabled:d.disabled}),k.append(n,m,l,p)}if(d.hasOwnProperty("disabled")&&"true"===d.disabled){var x=null,x="group"===d.type?l.find("> .motopress-property-button-wrapper > .motopress-property-disabled"):c("<div />",{"class":"motopress-property-disabled"}).appendTo(k);
x.data("popover")||x.popover({placement:"top",trigger:"manual",container:k,content:localStorage.getItem("CELiteTooltipText")});x.on("click",function(){c(this).popover("show");var a=setTimeout(function(){x.popover("hide");clearTimeout(a)},2E3)})}f.append(k);l.addClass("motopress-controls");l.attr("id",h);m.attr("for",h)})}"undefined"===typeof b&&("undefined"!==typeof d&&(b=f.children('[data-motopress-parameter="'+d+'"]:first'),d=f.children('[data-motopress-parameter="'+d+'"]:last'),b.replaceWith(d)),
this.settingsForms=f)},displaySettings:function(a,b,d,e,f){"undefined"===typeof b&&"undefined"===typeof e&&(CE.Dialog.myThis.settingsTab.children(".motopress-settings-forms").detach(),CE.Dialog.myThis.settingsTab.html(this.settingsForms));var g=this.getShortcodeAttrs(b);if(g){var h=this,k="undefined"===typeof d?this.settingsForms:d,l=null,n=null,m=this.getGeneralAttrs(b);"undefined"!==typeof e&&(d={},d[e]=m[e],m=d);var p=null,q=null;c.each(m,function(d,e){l=k.find('> [data-motopress-parameter="'+
d+'"] > .motopress-controls, > [data-motopress-parameter="'+d+'"] > :not(".motopress-property-legend, .motopress-property-label, .motopress-property-description, hr") > .motopress-controls');if(l.hasClass("motopress-property-group"))f&&l.trigger("change",a),h.child.children("[data-motopress-shortcode]").each(function(b){b=l.find(".motopress-property-group-accordion-item-content:eq("+b+")");h.displaySettings(a,c(this),b)}),l.trigger("render",a);else{q=l.controller();if(e.hasOwnProperty("saveInContent")&&
"true"===e.saveInContent){var t="undefined"===typeof b?h.shortcode:b;"undefined"!==typeof t.attr("data-motopress-content")&&(n=t.attr("data-motopress-content").replace(/\[\]/g,"["))}else n=g[q.name].value;p=m[q.name]["default"];q.set(n,p,a);l.trigger("customize");if(!q.isChild&&q.dependency){var r=null;h.settingsForms.find('> [data-motopress-parameter] > .motopress-controls, > [data-motopress-parameter] > :not(".motopress-property-legend, .motopress-property-label, .motopress-property-description, hr") > .motopress-controls').each(function(){r=
c(this).controller();r.name===q.dependency.parameter&&r.get()!=q.dependency.value&&h.settingsForms.children('[data-motopress-parameter="'+q.name+'"]').addClass("motopress-hide")})}}})}},saveSettings:function(a){if("undefined"!==typeof a&&"undefined"!==typeof a.name){var b=null;a.isChild?(b=a.element.closest(".motopress-property-group-accordion-item").index(),b=this.child.children("[data-motopress-shortcode]:eq("+b+")")):b=this.shortcode;var d=this.getShortcodeAttrs(b);if(d){var e=this.getGeneralAttrs(b)[a.name],
f=a.get();e.hasOwnProperty("saveInContent")&&"true"===e.saveInContent?b.attr("data-motopress-content",f):d[a.name].value=void 0!==f&&"string"===typeof f?f.replace(new RegExp(/"/g),"'").replace(new RegExp(/[\[\]]/g),""):f;this.setShortcodeAttrs(d,b);a.isChild||this.renderShortcode();if("mp_row"===this.shortcodeName||"mp_row_inner"===this.shortcodeName){if("bg_media_type"===a.name)switch(this.clearRowMediaBG(this.element),f){case "video":this.renderHTML5VideoBG();break;case "youtube":this.renderYoutubeBG();
break;case "parallax":this.element.addClass("motopress-row-parallax").attr("data-stellar-background-ratio",.5),this.element.css("background-image","url('http://static.getmotopress.com/motopress-parallax-background-demo.jpg')"),c.stellar("refresh")}-1!==jQuery.inArray(a.name,["bg_video_youtube","bg_video_youtube_cover"])&&(this.clearRowMediaBG(this.element),this.renderYoutubeBG());-1!==jQuery.inArray(a.name,["bg_video_webm","bg_video_mp4","bg_video_ogg","bg_video_cover"])&&(this.clearRowMediaBG(this.element),
this.renderHTML5VideoBG())}}}},renderYoutubeBG:function(){$this=this;var a="undefined"!==typeof this.element.attr("data-motopress-parameters")?this.element.attr("data-motopress-parameters"):null,a=c.parseJSON(a);c.ajax({url:parent.motopress.ajaxUrl,type:"POST",dataType:"text",data:{action:"motopress_ce_render_youtube_bg",nonce:parent.motopressCE.nonces.motopress_ce_render_youtube_bg,postID:parent.motopressCE.postID,bg_video_youtube:a.bg_video_youtube.value,bg_video_youtube_cover:a.bg_video_youtube_cover.value,
bg_video_youtube_repeat:a.bg_video_youtube_repeat.value,bg_video_youtube_mute:a.bg_video_youtube_mute.value},success:function(a){$this.element.addClass("mp-row-video").children(".motopress-row-helper").before(a);mpInitYouTubePlayers($this.element.children(".mp-video-container").find(".mp-youtube-video"));mpFixBackgroundVideoSize($this.element.children(".mp-video-container"))},error:function(a){console.log(a)}})},renderHTML5VideoBG:function(){$this=this;var a="undefined"!==typeof this.element.attr("data-motopress-parameters")?
this.element.attr("data-motopress-parameters"):null,a=c.parseJSON(a);c.ajax({url:parent.motopress.ajaxUrl,type:"POST",dataType:"text",data:{action:"motopress_ce_render_video_bg",nonce:parent.motopressCE.nonces.motopress_ce_render_video_bg,postID:parent.motopressCE.postID,bg_video_mp4:a.bg_video_mp4.value,bg_video_webm:a.bg_video_webm.value,bg_video_ogg:a.bg_video_ogg.value,bg_video_cover:a.bg_video_cover.value,bg_video_mute:a.bg_video_mute.value,bg_video_repeat:a.bg_video_repeat.value},success:function(a){$this.element.addClass("mp-row-video").children(".motopress-row-helper").before(a);
mpFixBackgroundVideoSize($this.element.children(".mp-video-container"))},error:function(a){console.log(a)}})},clearRowMediaBG:function(a){a.children(".mp-video-container").remove();a.removeClass("mp-row-video motopress-row-parallax").css("background-image","").css("background-position","");a.removeAttr("data-stellar-background-ratio").removeData("stellarBackgroundIsActive stellarBackgroundRatio stellarBackgroundStartingLeft stellarBackgroundStartingTop");c.stellar("refresh")},getShortcodeAttrs:function(a){return(a=
("undefined"===typeof a?this.shortcode:a).attr("data-motopress-parameters"))?c.parseJSON(a):!1},setShortcodeAttrs:function(a,b){("undefined"===typeof b?this.shortcode:b).attr("data-motopress-parameters",JSON.stringify(a))},getGeneralAttrs:function(a){var b=this.group,d=this.shortcodeName;"undefined"!==typeof a&&(b=a.attr("data-motopress-group"),d=a.attr("data-motopress-shortcode"));return c.extend(!0,{},CE.LeftBar.myThis.library[b].objects[d].parameters)},generateStyleForms:function(){var a=this.getShortcodeStyle();
if(a){var b=this,d=null,e=null,f=null,g=null,h=null;c.each(this.isGrid?CE.Style.gridProps:CE.Style.props,function(k,l){d=parent.MP.Utils.uniqid();l.value=a[k].value;f=CE.CtrlTemplates.createLegend(l.legend);g=CE.CtrlTemplates.createLabel(l.label);h=CE.CtrlTemplates.createDescription(l.description);var n=c("<div />",{"data-motopress-parameter":k,"data-motopress-disabled":l.disabled});switch(l.type){case "margin":e=CE.CtrlTemplates.createMargin(l);e.ce_ctrl_margin({name:k,dependency:l.dependency,isChild:!1,
disabled:l.disabled,isStyle:!0,margin:l});n.append(f,g,e,h);break;case "text":e=CE.CtrlTemplates.createInput(l,k);e.ce_ctrl_input({name:k,dependency:l.dependency,isChild:!1,disabled:l.disabled,isStyle:!0});n.append(f,g,e,h);break;case "select2":e=CE.CtrlTemplates.createInput(l,k),e.ce_ctrl_select2({name:k,dependency:l.dependency,isChild:!1,disabled:l.disabled,isStyle:!0,instance:b}),n.append(f,g,e,h)}b.styleForms.append(n);e.addClass("motopress-controls");e.attr("id",d);g.attr("for",d)})}},displayStyle:function(a){CE.Dialog.myThis.styleTab.children(".motopress-style-forms").detach();
CE.Dialog.myThis.styleTab.html(this.styleForms);var b=this.getShortcodeStyle();if(b){var d=this,e=null,f=null,g=null,h=null,k=this.isGrid?CE.Style.gridProps:CE.Style.props;c.each(b,function(c,n){f=d.styleForms.find('> [data-motopress-parameter="'+c+'"] > .motopress-controls, > [data-motopress-parameter="'+c+'"] > :not(".motopress-property-legend, .motopress-property-label, .motopress-property-description, hr") > .motopress-controls:not(".select2-container")');e=f.controller();g=b[e.name].value;h=
k[e.name]["default"];e.set(g,h,a);f.trigger("customize")})}},getShortcodeStyle:function(){var a=this.shortcode.attr("data-motopress-styles");if(a){a=c.parseJSON(a);if(!this.isGrid&&a.hasOwnProperty("margin")&&c.isEmptyObject(a.margin)&&this.child.length){var b=CE.Style.props.margin["default"].slice(),d=this.child.prop("class").split(" ").filter(function(a){return CE.Style.props.margin.regExp.test(a)});d.length&&c.each(d,function(a,d){var g=d.match(CE.Style.props.margin.regExp),h=g[1],k=parseInt(g[2]);
"undefined"===typeof h?c.each(b,function(a,c){c!==CE.Style.props.margin["default"][a]&&(b[a]=k)}):(g=c.inArray(h,CE.Style.props.margin.sides),-1!==g&&(b[g]=k))});a.margin.value=b.join(",");this.setShortcodeStyle(a)}return a}return!1},saveStyle:function(a){var b=this.getShortcodeStyle();if(b)if("undefined"===typeof a&&this.isGrid){var d=this,e=null;c.each(b,function(c){e=d.styleForms.find('> [data-motopress-parameter="'+c+'"] > .motopress-controls, > [data-motopress-parameter="'+c+'"] > :not(".motopress-property-legend, .motopress-property-label, .motopress-property-description, hr") > .motopress-controls:not(".select2-container")');
a=e.controller();d._saveStyle(b,a,!1)})}else this._saveStyle(b,a),CE.Resizer.myThis.updateBottomInHandleMiddle(),CE.Resizer.myThis.updateHandle(),CE.Resizer.myThis.updateSplitterHeight(),CE.Resizer.myThis.updateHandleMiddle()},_saveStyle:function(a,b,d){"undefined"===typeof d&&(d=!0);var e=a[b.name].value,f=d?b.get():e;d&&(a[b.name].value=f,this.setShortcodeStyle(a));a=null;this.isGrid?a=this.shortcode:this.child.length&&(a=this.child);if("margin"!==b.name&&CE.LeftBar.myThis.library[this.group].objects[this.shortcodeName].styles.mp_style_classes.hasOwnProperty("selector")){var g=
CE.LeftBar.myThis.library[this.group].objects[this.shortcodeName].styles.mp_style_classes.selector;g.length&&(a=a.find(g))}switch(b.name){case "margin":g=b.getClasses(e);g.length&&(e=g);b=b.getClasses(f);b.length&&(f=b);break;case "mp_style_classes":if(!d&&!c.isEmptyObject(b.options.style.basic)){var h="";c.isArray(b.options.style.basic)?c.each(b.options.style.basic,function(a,b){h+=b["class"]+" "}):h=b.options.style.basic["class"]+" ";f=h+f}}null!==a&&a.length&&(d&&a.removeClass(e),a.addClass(f))},
setShortcodeStyle:function(a){this.element.attr("data-motopress-styles",JSON.stringify(a))}})});
steal("jquery/controller",function(c){CE.Controls("CE.InlineEditor",{curElement:null,styleFormats:!1,init:function(){c(document).on("mousedown",".mce-tinymce.mce-panel",function(a){a.preventDefault()});c(document).on("keydown",'[data-motopress-shortcode="mp_text"], [data-motopress-shortcode="mp_heading"]',function(a){a.which===c.ui.keyCode.TAB?CE.Selectable.myThis.unselect():a.which===c.ui.keyCode.ESCAPE&&(CE.InlineEditor.curElement&&CE.InlineEditor.curElement.controller().close(!0,"show"),a=c(this).parent("."+
CE.DragDrop.myThis.blockContent.attr("class")).next("."+CE.DragDrop.myThis.helper.attr("class")).children("."+CE.DragDrop.myThis.dragHandle.attr("class")),CE.Selectable.focusWithoutScroll(a.prev()),CE.Dialog.myThis.element.dialog("isOpen")||CE.Dialog.myThis.open(a))});c(parent.document).on("mousedown",function(a){CE.InlineEditor.curElement&&!c(a.target).closest(".ui-dialog").length&&CE.InlineEditor.curElement.controller().close(!0,"show")})},isTinymce:function(a){var b=!1;c(a.target).hasClass("motopress-drag-handle")||
(a=c(a.currentTarget.activeElement),a.length&&(a.closest("[data-motopress-shortcode]").length||a.closest(".mce-tinymce").length||a.closest(".mce-window").length||a.closest(".mce-popover").length)&&(b=!0));return b}},{id:null,isOpen:!1,editor:null,helpers:null,blockContent:null,floatpanel:null,saved:!1,init:function(a,b){this._super(a,b);this.id=parent.MP.Utils.uniqid();this.blockContent=this.element.parent("."+CE.DragDrop.myThis.blockContent.attr("class"));this.helpers=this.blockContent.next("."+
CE.DragDrop.myThis.helper.attr("class")).children().not(".motopress-splitter");this.resizers=this.blockContent.nextAll(".ui-resizable-handle");this.element.parent("."+CE.DragDrop.myThis.blockContent.attr("class")).next("."+CE.DragDrop.myThis.helper.attr("class")).children("."+CE.DragDrop.myThis.dragHandle.attr("class")).on("click",this.proxy("onClick"))},destroy:function(){CE.InlineEditor.curElement=null;this.floatpanel&&this.floatpanel.remove();this._super()},render:function(){var a=this;this.shortcode.children("div").attr("id",
this.id);var b=this.element.parent("."+CE.DragDrop.myThis.blockContent.attr("class")).next("."+CE.DragDrop.myThis.helper.attr("class")).children("."+CE.DragDrop.myThis.dragHandle.attr("class")),d=setTimeout(function(){var e="bold italic underline | ";c.isEmptyObject(CE.InlineEditor.styleFormats)||(e+="styleselect | ");tinyMCE.init({selector:"#"+a.id,inline:!0,plugins:"link hr textcolor",visual:!1,convert_urls:!1,menubar:!1,toolbar:e+"formatselect | fontsizeselect forecolor | alignleft aligncenter alignright alignjustify | numlist bullist outdent indent | link unlink hr removeformat",
fontsize_formats:"8px 9px 10px 12px 14px 16px 18px 24px 36px 48px 60px 72px",language:parent.MP.Settings.lang.tinymce,skin:"motopresscontenteditor",browser_spellcheck:parent.MP.Settings.spellcheck,style_formats_merge:!1,style_formats:CE.InlineEditor.styleFormats,setup:function(d){a.editor=d;d.on("loadContent",function(){a.autoOpen(b,1)});d.on("execCommand",function(b){switch(b.command){case "mceToggleEditor":if(!a.floatpanel&&(b=c("body").children(".mce-floatpanel:last"),b.length&&(a.floatpanel=b,
50<b.height()))){var d=b.find('.mce-container-body.mce-flow-layout > [role="toolbar"]:first').outerHeight(!0)-2;b.width(723).height(d);b.children(".mce-container-body.mce-abs-layout").width(723).height(d).children(".mce-container.mce-panel").width(723).height(d).children(".mce-container-body.mce-stack-layout").width(723).height(d)}a.floatpanel.offset().left+a.floatpanel.width()>c(window).width()&&(b=a.element.offset().left+a.element.width()-a.floatpanel.width(),a.floatpanel.css("left",b))}})},init_instance_callback:function(d){c.each(d.menuItems.formats.menu,
function(a,b){"Blocks"===b.text&&c.each(b.menu,function(a,c){"Div"===c.text&&delete b.menu[a]})});c(d.getBody()).on("blur",function(){a.save()});c(d.getBody()).on("focus",function(){a.saved=!1;if(b.hasClass(CE.Selectable.myThis.selectedClass))b.trigger("click");else var c=setTimeout(function(){CE.LeftBar.myThis.leftBar.focus();clearTimeout(c)},0)})}});clearTimeout(d)},0)},onClick:function(a){c(a.target).hasClass(CE.Selectable.myThis.selectedClass)&&!this.isOpen&&(this.isOpen=!0,CE.InlineEditor.curElement=
this.element,CE.Dialog.myThis.element.dialog("isOpen")&&CE.Dialog.myThis.element.dialog("close"),this.helpers.hide(),c(".motopress-content-wrapper > .motopress-handle-middle-in:last").height(""),this.resizers.hide(),this.blockContent.addClass("motopress-overflow-visible-important"),this.editor.execCommand("mceToggleEditor",!1),this.showHideFloatpanel("show"))},close:function(a,b){this.isOpen&&(this.isOpen=!1,this.save(),this.helpers.show(),"undefined"!==typeof a&&("show"===b?this.resizers.show():
"hide"===b&&this.resizers.hide()),this.showHideFloatpanel("hide"),this.blockContent.removeClass("motopress-overflow-visible-important"),CE.Resizer.myThis.updateHandle(),parent.CE.Save.changeContent())},save:function(){this.saved||(this.shortcode.attr("data-motopress-content",this.editor.getContent({format:"html"})),this.saved=!0,CE.Resizer.myThis.updateBottomInHandleMiddle(),CE.Resizer.myThis.updateSplitterHeight(this.element,"split"),CE.Resizer.myThis.updateHandleMiddle())},autoOpen:function(a,b){if(3>=
b)if(1<b&&a.hasClass(CE.Selectable.myThis.selectedClass))CE.Dialog.myThis.element.dialog("isOpen")&&CE.Dialog.myThis.element.dialog("close"),c(this.editor.getBody()).trigger("blur").trigger("focus"),a.trigger("click");else var d=this,e=setTimeout(function(){d.autoOpen(a,b+1);clearTimeout(e)},500)},showHideFloatpanel:function(a){this.floatpanel&&("show"===a?this.floatpanel.show():this.floatpanel.hide())}})});
steal("jquery/controller",function(c){CE.Controls("CE.CodeEditor",{},{init:function(a,b){this._super(a,b);var c=this.element.parent("."+CE.DragDrop.myThis.blockContent.attr("class")).next("."+CE.DragDrop.myThis.helper.attr("class")).children("."+CE.DragDrop.myThis.dragHandle.attr("class"));this.autoOpen(c,1);c.on("click",this.proxy("onClick"))},destroy:function(){this._super()},render:function(){this.shortcode.find(".row").removeClass("row").addClass("mp-row-fluid");this.shortcode.find("a").attr("tabindex",
-1);CE.Resizer.myThis.updateBottomInHandleMiddle();CE.Resizer.myThis.updateSplitterHeight();CE.Resizer.myThis.updateHandle();CE.Resizer.myThis.updateHandleMiddle()},autoOpen:function(a,b){if(3>=b)if(1<b&&a.hasClass(CE.Selectable.myThis.selectedClass))a.trigger("click");else var c=this,e=setTimeout(function(){c.autoOpen(a,b+1);clearTimeout(e)},500)},onClick:function(a){if(c(a.target).hasClass(CE.Selectable.myThis.selectedClass)){a=parent.CE.CodeModal.myThis.editor;parent.CE.CodeModal.currentShortcode=
this.element;var b=this.shortcode.attr("data-motopress-content");"undefined"!==typeof b&&(b=b.replace(RegExp("\\[\\]","ig"),"["),null!==a&&a.setContent(b,{format:"html"}),parent.CE.CodeModal.myThis.content.val(parent.switchEditors._wp_Nop(b)));parent.CE.CodeModal.myThis.saveHandler=this.saveHandler;parent.CE.CodeModal.myThis.element.modal("show")}},saveHandler:function(a){a=parent.CE.CodeModal.myThis;a.switchVisual();var b=parent.CE.CodeModal.currentShortcode.controller(),c=null!==a.editor?a.editor.getContent({format:"html"}):
parent.switchEditors._wp_Autop(a.content.val());c.length?b.shortcode.attr("data-motopress-content",c):b.shortcode.removeAttr("data-motopress-content");b.renderShortcode();a.element.modal("hide")}})});
steal("jquery/class",function(c){c.Class("CE.Tools",{myThis:null},{init:function(){CE.Tools.myThis=this},removeBlock:function(){CE.Selectable.setScrollY(window.scrollY);CE.Dialog.myThis.element.dialog("isOpen")&&CE.Dialog.myThis.element.dialog("close");parent.CE.Navbar.myThis.hideObjectControlBtns();var a=c(".motopress-selected").closest('[class*="span"].motopress-span'),b=a.parents(".mp-row-fluid.motopress-row, .motopress-content-wrapper").eq(-2),d=parent.MP.Utils.getSpanClass(a.prop("class").split(" ")),
e=a.parent(".mp-row-fluid.motopress-row");CE.DragDrop.myThis.removeEmptyBlocks(a,d);a.hasClass("ce_inline_editor")&&(d=a.controller().child.attr("id"),"undefined"!==typeof d&&(d=tinymce.get(d),"undefined"!==typeof d&&d.destroy()));a.remove();var d=CE.DragDrop.myThis.clearIfEmpty(e,"remove"),f=!1;d&&d.hasOwnProperty("row")&&(f=!0,e=d.row);CE.DragDrop.myThis.isEmptyScene()&&(c(".motopress-handle-middle-in").remove(),CE.DragDrop.myThis.emptySceneHelper.show(),CE.DragDrop.myThis.moreHandler.hide());f||
CE.DragDrop.myThis.resize(e,a,"remove");CE.DragDrop.myThis.resizer.updateBottomInHandleMiddle();CE.Resizer.myThis.updateSplittableOptions(null,e,null);CE.Resizer.myThis.updateSplitterHeight(b,"remove");CE.Resizer.myThis.updateHandle();CE.Resizer.myThis.updateHandleMiddle()}})});
steal("jquery/class",function(c){c.Class("CE.Resizer",{myThis:null},{minHeight:30,spaceMinHeight:10,gmapMinHeight:150,handle:null,addedStyleProperties:"position top left width height background-position background-repeat".split(" "),emptySpan:c("<div />",{"class":"motopress-span motopress-empty mp-hidden-phone"}),splitter:c("<div />",{"class":"motopress-splitter"}),oldWidth:null,emptySpanNumber:0,init:function(){CE.Resizer.myThis=this;c(window).on("resize",function(a){a.target===this&&CE.Resizer.myThis.proxy("updateHandle")})},
getMinHeight:function(a){var b=a.find(".motopress-block-content > [data-motopress-shortcode]");return b.length&&"mp_gmap"===b.attr("data-motopress-shortcode")?this.gmapMinHeight:a.hasClass(CE.DragDrop.myThis.spaceClass)?this.spaceMinHeight:this.minHeight},makeResizable:function(a){var b=this,d=a.parent(".mp-row-fluid.motopress-row").width()/100,e=d*CE.Grid.myThis.columnWidthPiece,f=e+d*CE.Grid.myThis.columnMarginPiece,g=Math.round(e/4),g=g<e?g:0;a.not("[data-motopress-wrapper-id], .motopress-empty").each(function(){c(this).resizable({grid:[f,
10],handles:"e, s, w, se, sw",helper:!1,minWidth:e-g,minHeight:CE.Resizer.myThis.getMinHeight(c(this)),zIndex:1002,create:function(){c(this).resizable("option","maxWidth",c(this).width());c(this).children(".ui-resizable-handle").hide()},start:function(a,d){CE.LeftBar.myThis.disable();b.hideSplitters();b.hideEmptySpans();c(".motopress-content-wrapper > .motopress-handle-middle-in:last").height("");c(this).find(".motopress-handle-bottom-in").css({bottom:"",height:""});CE.Dialog.myThis.element.dialog("isOpen")&&
CE.Dialog.myThis.element.dialog("close");CE.Resizer.myThis.handle=c(a.originalEvent.target);b.oldWidth=d.originalSize.width;var e=parent.MP.Utils.getHandleClass(CE.Resizer.myThis.handle.prop("class").split(" ")),g=null,h=0,g="ui-resizable-e"===e||"ui-resizable-se"===e?d.element.next(".motopress-empty"):d.element.prev(".motopress-empty"),e=parent.MP.Utils.getSpanClass(d.element.prop("class").split(" ")),e=parent.MP.Utils.getSpanNumber(e),k=0;g&&g.length&&(h=parent.MP.Utils.getSpanClass(g.prop("class").split(" ")),
k=parent.MP.Utils.getSpanNumber(h),h=g.width());CE.Resizer.myThis.maxSpanNumber=e+k;d.element.resizable("option","maxWidth",d.element.width()+h+f/2);CE.Resizer.myThis.handle.addClass("motopress-resizable-handle-hover");d.element.css({position:"relative",top:0,left:0});c(this).parent(".motopress-content-wrapper > .mp-row-fluid.motopress-row").length||(g=c(this).parent(".mp-row-fluid.motopress-row").nextAll(".motopress-handle-middle-in:last"),h=parseInt(g.css("min-height")),g.height(h))},stop:function(d,
e){CE.LeftBar.myThis.enable();b.showSplitters();b.showEmptySpans();CE.Resizer.myThis.handle.removeClass("motopress-resizable-handle-hover");for(var f={},g=0;g<CE.Resizer.myThis.addedStyleProperties.length;g++)f[CE.Resizer.myThis.addedStyleProperties[g]]="";e.element.css(f);c(this).hasClass("ce_controls")&&!CE.Dialog.myThis.element.dialog("isOpen")&&(f=e.element.find(".motopress-drag-handle"),CE.Dialog.myThis.open(f));f=e.element.prev(".motopress-empty");g=e.element.next(".motopress-empty");CE.DragDrop.myThis.makeEditableEmptySpan(f.add(g));
b.updateSplittableOptions(f,null,null);b.updateSplittableOptions(g,null,null);CE.Resizer.myThis.updateBottomInHandleMiddle();CE.Resizer.myThis.updateSplitterHeight(a,"resize");CE.Resizer.myThis.updateHandle();CE.Resizer.myThis.updateHandleMiddle();parent.CE.Save.changeContent()},resize:function(a,b){var c=parent.MP.Utils.getHandleClass(CE.Resizer.myThis.handle.prop("class").split(" "));switch(c){case "ui-resizable-s":CE.Resizer.myThis.verticalResize(b);break;case "ui-resizable-w":CE.Resizer.myThis.horizontalResize(c,
b,f);break;case "ui-resizable-e":CE.Resizer.myThis.horizontalResize(c,b,f);break;case "ui-resizable-sw":CE.Resizer.myThis.verticalResize(b);CE.Resizer.myThis.horizontalResize(c,b,f);break;case "ui-resizable-se":CE.Resizer.myThis.verticalResize(b),CE.Resizer.myThis.horizontalResize(c,b,f)}}});var d=c(this).find(".motopress-block-content > [data-motopress-shortcode]");if(d.length){var k=d.attr("data-motopress-resize");"undefined"===typeof k&&(k=d.attr("data-motopress-group"),d=d.attr("data-motopress-shortcode"),
k=CE.LeftBar.myThis.library[k].objects[d].resize);switch(k){case "none":c(this).children(".ui-resizable-handle").addClass("motopress-hide");break;case "horizontal":c(this).children('.ui-resizable-handle:not(".ui-resizable-e, .ui-resizable-w")').addClass("motopress-hide");break;case "vertical":c(this).children('.ui-resizable-handle:not(".ui-resizable-s")').addClass("motopress-hide")}}})},horizontalResize:function(a,b,c){var e=b.size.width;b.element.css({top:0,left:0});if(e!==this.oldWidth){var f=null,
f=parent.MP.Utils.getSpanClass(b.element.prop("class").split(" ")),g=parent.MP.Utils.getSpanNumber(f),h=Math.round(this.oldWidth/c);c=Math.round(e/c)-h;g+c<=this.maxSpanNumber&&(b.element.removeClass(f).addClass("mp-span"+(g+c)),"ui-resizable-e"===a||"ui-resizable-se"===a?(a="east",f=b.element.next(".motopress-empty")):(a="west",f=b.element.prev(".motopress-empty")),f&&f.length?(a=parent.MP.Utils.getSpanClass(f.prop("class").split(" ")),g=parent.MP.Utils.getSpanNumber(a),c<g?f.removeClass(a).addClass("mp-span"+
(g-c)):f.remove()):(f=CE.Resizer.myThis.emptySpan.clone(),f.addClass("mp-span"+Math.abs(c)).addClass("motopress-empty-hide"),"east"===a?b.element.after(f):b.element.before(f)),b.element.css({width:""}),this.oldWidth=e)}},verticalResize:function(a){parseInt(a.element.css("min-height"))===a.element.height()&&a.element.css("min-height","");var b=a.element.height();a.element.css("min-height",b)},makeSplittable:function(a){if(!a.length)return!1;var b=this,d=a.hasClass("motopress-splitter")?a:a.find(".motopress-splitter"),
e,f,g,h;a=a.closest(".mp-row-fluid.motopress-row").width()/100;var k=a*CE.Grid.myThis.columnMarginPiece,l=Math.round(a*CE.Grid.myThis.columnWidthPiece+k);d.draggable({axis:"x",cursor:"col-resize",grid:[l,0],helper:"clone",zIndex:1,start:function(a,d){d.helper.hide();b.hideSplitters(c(this));b.hideEmptySpans();c(".motopress-content-wrapper > .motopress-handle-middle-in:last").height("");e=null;h=g=!1;CE.LeftBar.myThis.disable();c(this).addClass("motopress-splitter-hover");CE.Dialog.myThis.element.dialog("isOpen")&&
CE.Dialog.myThis.element.dialog("close");d.helper.closest(".mp-row-fluid.motopress-row").find(".motopress-drag-handle").css("cursor","col-resize")},stop:function(a,d){CE.LeftBar.myThis.enable();b.showSplitters();b.showEmptySpans();d.helper.closest(".mp-row-fluid.motopress-row").find(".motopress-drag-handle").css("cursor","move");c(this).removeClass("motopress-splitter-hover");var e=c(this).closest('[class*="mp-span"].motopress-span');CE.Resizer.myThis.updateBottomInHandleMiddle();CE.Resizer.myThis.updateSplitterHeight(e,
"split");CE.Resizer.myThis.updateSplittableOptions(e,null,null,"split");CE.Resizer.myThis.updateHandle();CE.Resizer.myThis.updateHandleMiddle();g&&f.length&&f.remove();parent.CE.Save.changeContent()},drag:function(a,b){var d=b.offset.left;null===e&&(e=d);if(d!==e){g=!1;var q=c(this).closest('[class*="mp-span"].motopress-span'),s=q.prev('[class*="mp-span"].motopress-span'),u=parent.MP.Utils.getSpanNumber(parent.MP.Utils.getSpanClass(q.prop("class").split(" "))),t=parent.MP.Utils.getSpanNumber(parent.MP.Utils.getSpanClass(s.prop("class").split(" "))),
r=q.offset().left,v=q.width(),w=s.offset().left;(h?d>=w+l&&d<=r+v-l:d>=w&&d<=r+v+k)?(h=!1,d>e?1>=u?q.hasClass("motopress-empty")&&(f=q,g=!0,s.removeClass("mp-span"+t).addClass("mp-span"+(t+1))):(q.removeClass("mp-span"+u).addClass("mp-span"+(u-1)),s.removeClass("mp-span"+t).addClass("mp-span"+(t+1))):d<e&&(1>=t?s.hasClass("motopress-empty")&&(f=s,g=!0,q.removeClass("mp-span"+u).addClass("mp-span"+(u+1))):(q.removeClass("mp-span"+u).addClass("mp-span"+(u+1)),s.removeClass("mp-span"+t).addClass("mp-span"+
(t-1))))):(h=!0,d>r+v-l?q.hasClass("motopress-empty")?(f=q,g=!0,s.removeClass("mp-span"+t).addClass("mp-span"+(u+t))):(q.removeClass("mp-span"+u).addClass("mp-span1"),s.removeClass("mp-span"+t).addClass("mp-span"+(t+u-1))):d<w+l&&(s.hasClass("motopress-empty")?(f=s,g=!0,q.removeClass("mp-span"+u).addClass("mp-span"+(u+t))):(q.removeClass("mp-span"+u).addClass("mp-span"+(u+t-1)),s.removeClass("mp-span"+t).addClass("mp-span1"))));e=d;d=parseInt(q.css("margin-top"))+parseInt(q.css("border-top-width"));
q=c(this).closest(".mp-row-fluid").height();c(this).css({top:-d,height:q});g&&a.preventDefault()}}})},calcSplitterOptions:function(a,b){var d=null,e=null,f=e=null,g=null,h=null;if("column"===b)e=a.parent(".mp-row-fluid.motopress-row").width(),d=a;else if("row"===b)e=a.width(),d=a.children('[class*="mp-span"].motopress-span');else return!1;var k=e/100,e=k*CE.Grid.myThis.columnMarginPiece,g=k*CE.Grid.myThis.splitterWidthPiece+e,h=-(k*CE.Grid.myThis.splitterMarginPiece+e/2);d.each(function(){f=c(this).find(".motopress-helper > .motopress-splitter");
CE.Resizer.myThis.makeSplittable(f);f.width(g);f.css("margin-left",h-parseInt(c(this).css("border-left-width")));c(this).children(".mp-row-fluid.motopress-row").length||CE.Resizer.myThis.makeResizable(c(this))})},updateSplittableOptions:function(a,b,d,e){"undefined"===typeof e&&(e="default");"init"===e||"split"===e?(b=null,"init"===e?b=c(".motopress-content-wrapper .mp-row-fluid.motopress-row"):"split"===e&&(a=a.parents(".mp-row-fluid.motopress-row, .motopress-content-wrapper").eq(-2),"undefined"!==
typeof a&&(b=c.merge(c.merge([],a),a.find(".mp-row-fluid.motopress-row")))),b&&"undefined"!==typeof b&&c.each(b,function(){CE.Resizer.myThis.calcSplitterOptions(c(this),"row")})):(a&&this.calcSplitterOptions(a,"column"),b&&c.each(c.merge(c.merge([],b),b.find(".mp-row-fluid.motopress-row")),function(){CE.Resizer.myThis.calcSplitterOptions(c(this),"row")}),d&&c.each(c.merge(c.merge([],d),d.find(".mp-row-fluid.motopress-row")),function(){CE.Resizer.myThis.calcSplitterOptions(c(this),"row")}))},updateSplitterHeight:function(a,
b){var d=setTimeout(function(){var a=null,a=c(".motopress-content-wrapper .mp-row-fluid.motopress-row");c.each(a.get().reverse(),function(){var a=c(this).children('[class*="span"].motopress-span'),b=c(this).height();a.filter(".motopress-empty").height(b)});c.each(a,function(){var a=c(this),b=a.children('[class*="span"].motopress-span'),d=a.width()/100*CE.Grid.myThis.columnMarginPiece,e=a.height();b.each(function(){var a=c(this),b=parseInt(a.css("margin-top"))+parseInt(a.css("border-top-width"));a.find(".motopress-splitter").css({height:e,
top:-b});a.find(".motopress-handle-intermediate").css({width:d,height:e,top:-b,left:-d-parseInt(a.css("border-left-width"))})})});clearTimeout(d)},50)},hideSplitters:function(a){a="undefined"===typeof a?a=!1:a;var b=c('.motopress-content-wrapper [class*="mp-span"] .motopress-splitter');a?b.not(a).addClass("motopress-hide"):b.addClass("motopress-hide")},showSplitters:function(){c('.motopress-content-wrapper [class*="mp-span"] .motopress-splitter').removeClass("motopress-hide")},hideEmptySpans:function(){c('.motopress-content-wrapper [class*="mp-span"].motopress-empty').addClass("motopress-empty-hide").height(1)},
showEmptySpans:function(){c('.motopress-content-wrapper [class*="mp-span"].motopress-empty').removeClass("motopress-empty-hide")},updateHandle:function(){var a=setTimeout(function(){if(!CE.DragDrop.myThis.isEmptyScene()){var b=c(".motopress-content-wrapper > .mp-row-fluid:first"),d=b.offset(),e=c(".motopress-content-wrapper > .mp-row-fluid:last"),f=CE.LeftBar.myThis.leftBar.width(),g=c(".motopress-handle-wrapper-left:first, .motopress-handle-wrapper-right:first").width(),h=d.left-f-parent.CE.Navbar.myThis.scrollWidth/
2,k=h-g;c(".motopress-content-wrapper > .mp-row-fluid.motopress-row").each(function(){var a=c(this),b=a.height();c(this).children('[class*="span"].motopress-span:first, [class*="span"].motopress-span:last').each(function(){var d=c(this),e=parseInt(d.css("margin-top"))+parseInt(d.css("border-top-width"));c(this).children(".motopress-wrapper-helper, .motopress-helper").each(function(){var f=c(this).hasClass("motopress-wrapper-helper")?k:h;c(this).find(".motopress-handle-left, .motopress-handle-right").each(function(){var g=
c(this).hasClass("motopress-handle-left")?"left":"right",k=parseInt(a.css("padding-"+g)),l=parseInt(a.css("border-"+g+"-width")),m=parseInt(d.css("border-"+g+"-width")),n={top:-e,width:f+k+l,height:b};n[g]=-h-m-k-l;c(this).css(n)})})})});var l=c("#motopress-container"),f=l.parent().width()-parent.CE.Navbar.myThis.scrollWidth,g=c(".motopress-content-wrapper > .motopress-handle-middle-in:first"),n=c(".motopress-content-wrapper > .motopress-handle-middle-in:last"),m=n.prevAll(".motopress-handle-middle-in:first");
m[0]!==g[0]&&m.css({width:"",left:"",height:"","margin-top":""});var p=c("html").height(),q=parseInt(l.css("top")),m=p-n.offset().top;p<q+l.outerHeight(!0)&&(m+=q);e=parseInt(e.css("margin-bottom"));Math.abs(parseInt(n.css("margin-top")))!==e&&(m+=e);b=parseInt(b.css("margin-top"));g.css({width:f,height:d.top,top:b-d.top,left:-h,"margin-top":""});n.css({width:f,left:-h,height:m,"margin-top":-e});c(".motopress-content-wrapper > .motopress-handle-more-disable").css({width:f,top:b-d.top,left:-h})}clearTimeout(a)},
50)},updateBottomInHandleMiddle:function(){var a=setTimeout(function(){CE.DragDrop.myThis.isEmptyScene()||c(".motopress-content-wrapper > .mp-row-fluid.motopress-row").each(function(){CE.Resizer.myThis.setHandleHeight(c(this))});clearTimeout(a)},50)},setHandleHeight:function(a){var b=parseInt(a.find(".motopress-handle-middle-in:last").css("min-height"));a.find(".motopress-handle-middle-in").each(function(){c(this).height(b)});a.children('[class*="span"].motopress-span:not(".motopress-empty")').each(function(){var b=
c(this).children(".mp-row-fluid.motopress-row"),e=null,f=null,g=null,h=0,k=a.is(":last-of-type")?0:5;b.length?(k=c(this).children(".motopress-handle-middle-in:last"),g=parseInt(k.css("min-height")),e=a.height(),f=c(this).outerHeight(!0),f<e&&(h=e-f),k.height(h+g),b.each(function(){CE.Resizer.myThis.setHandleHeight(c(this))})):(b=c(this).find(".motopress-handle-bottom-in"),g=parseInt(b.css("min-height")),e=a.height(),f=c(this).outerHeight(!0),f<e&&(h=e-f),b.css({bottom:k-h,height:h+g}))})},updateHandleMiddle:function(){var a=
setTimeout(function(){c('.motopress-content-wrapper > .motopress-handle-middle-in:not(":first, :last"), .motopress-content-wrapper > .mp-row-fluid > [class*="mp-span"] .motopress-handle-middle-in:not(":last-of-type")').each(function(){var a=c(this),d=a.prev(".mp-row-fluid"),e=a.next(".mp-row-fluid"),d=d.length?parseInt(d.css("margin-bottom")):0,f=e.length?parseInt(e.css("margin-top")):0,e=-d-5,d=Math.max(d,f)+10;0<d?a.css({"margin-top":e,height:d}):a.css({"margin-top":"",height:""})});clearTimeout(a)},
70)}})});
steal("jquery/class",function(c){c.Class("CE.DragDrop",{myThis:null,interruptInsert:!1,curHandle:null},{blockContent:c("<div />",{"class":"motopress-block-content"}),handleTopIn:c("<div />",{"class":"motopress-handle-top-in","data-motopress-position":"top-in"}),handleBottomIn:c("<div />",{"class":"motopress-handle-bottom-in","data-motopress-position":"bottom-in"}),handleIntermediate:c("<div />",{"class":"motopress-handle-intermediate","data-motopress-position":"intermediate"}),handleLeftOut:c("<div />",{"class":"motopress-handle-left-out",
"data-motopress-position":"left-out"}),handleRightOut:c("<div />",{"class":"motopress-handle-right-out","data-motopress-position":"right-out"}),handleLeftIn:c("<div />",{"class":"motopress-handle-left-in","data-motopress-position":"left-in"}),handleRightIn:c("<div />",{"class":"motopress-handle-right-in","data-motopress-position":"right-in"}),handleLeft:c("<div />",{"class":"motopress-handle-left","data-motopress-position":"left"}),handleRight:c("<div />",{"class":"motopress-handle-right","data-motopress-position":"right"}),
overlay:c("<div />",{"class":"motopress-overlay"}),dragHandle:c("<div />",{"class":"motopress-drag-handle"}),focusArea:c("<div />",{"class":"motopress-focus-area",tabindex:-1}),helper:c("<section />",{"class":"motopress-helper"}),handleMiddleOut:c("<span />",{"class":"motopress-handle-middle-out","data-motopress-position":"middle-out"}),handleMiddleIn:c("<span />",{"class":"motopress-handle-middle-in","data-motopress-position":"middle-in"}),emptySceneHelper:c("<section />",{id:"motopress-empty-scene-helper",
html:'<div class="motopress-empty-scene-container-first"><div class="motopress-empty-scene-image"></div><div class="motopress-empty-scene-wrapper-right"><div class="motopress-empty-scene-title">'+localStorage.getItem("CEEmptySceneHelperTitle")+'</div><div class="motopress-empty-scene-content">'+localStorage.getItem("CEEmptySceneHelperContent")+'</div></div></div><div class="motopress-empty-scene-container-second"><div class="motopress-empty-scene-or-label">'+localStorage.getItem("CEEmptySceneHelperOr")+
'</div><input type="text" class="motopress-empty-scene-type-here" value="'+localStorage.getItem("CEEmptySceneHelperInputText")+'"></div>'}),handleInsert:c("<div />",{"class":"motopress-handle-insert","data-motopress-position":"insert"}),emptySpanOverlay:c("<div />",{"class":"motopress-overlay"}),emptySpanHelper:c("<section />",{"class":"motopress-helper"}),handleWrapper:c("<div />",{"class":"motopress-handle-wrapper"}),wrapperHelperContainer:c("<div />",{"class":"motopress-wrapper-helper-container"}),
handleWrapperLeft:c("<div />",{"class":"motopress-handle-wrapper-left","data-motopress-position":"wrapper-left"}),handleWrapperRight:c("<div />",{"class":"motopress-handle-wrapper-right","data-motopress-position":"wrapper-right"}),wrapperHelper:c("<section />",{"class":"motopress-wrapper-helper"}),wrapperHelperResizer:c("<section />",{"class":"motopress-helper"}),wrapperId:0,lineHelperIntermediate:c("<div />",{"class":"motopress-line-helper-intermediate"}),lineHelperLeftOut:c("<div />",{"class":"motopress-line-helper-left-out"}),
lineHelperRightOut:c("<div />",{"class":"motopress-line-helper-right-out"}),lineHelperLeft:c("<div />",{"class":"motopress-line-helper-left"}),lineHelperRight:c("<div />",{"class":"motopress-line-helper-right"}),lineHelperLeftIn:c("<div />",{"class":"motopress-line-helper-left-in"}),lineHelperRightIn:c("<div />",{"class":"motopress-line-helper-right-in"}),lineHelperTopIn:c("<div />",{"class":"motopress-line-helper-top-in"}),lineHelperBottomIn:c("<div />",{"class":"motopress-line-helper-bottom-in"}),
lineHelperHandleMiddle:c("<div />",{"class":"motopress-line-helper-middle-in"}),lineHelperInsert:c("<div />",{"class":"motopress-line-helper-insert"}),lineHelperWrapperLeft:c("<div />",{"class":"motopress-line-helper-wrapper-left"}),lineHelperWrapperRight:c("<div />",{"class":"motopress-line-helper-wrapper-right"}),textHelperIntermediate:c("<div />",{"class":"motopress-text-helper-intermediate",text:localStorage.getItem("helperNewColumn")}),textHelperLeftOut:c("<div />",{"class":"motopress-text-helper-left-out",
text:localStorage.getItem("helperNewColumn")}),textHelperRightOut:c("<div />",{"class":"motopress-text-helper-right-out",text:localStorage.getItem("helperNewColumn")}),textHelperLeft:c("<div />",{"class":"motopress-text-helper-left",text:localStorage.getItem("helperNewColumn")}),textHelperRight:c("<div />",{"class":"motopress-text-helper-right",text:localStorage.getItem("helperNewColumn")}),textHelperLeftIn:c("<div />",{"class":"motopress-text-helper-left-in",text:localStorage.getItem("helperLeftIn")}),
textHelperRightIn:c("<div />",{"class":"motopress-text-helper-right-in",text:localStorage.getItem("helperRightIn")}),textHelperTopIn:c("<div />",{"class":"motopress-text-helper-top-in",text:localStorage.getItem("helperTopIn")}),textHelperBottomIn:c("<div />",{"class":"motopress-text-helper-bottom-in",text:localStorage.getItem("helperBottomIn")}),textHelperHandleMiddle:c("<div />",{"class":"motopress-text-helper-middle-in",text:localStorage.getItem("helperMiddle")}),textHelperInsert:c("<div />",{"class":"motopress-text-helper-insert",
text:localStorage.getItem("helperInsert")}),textHelperWrapperLeft:c("<div />",{"class":"motopress-text-helper-wrapper-left",text:localStorage.getItem("helperNewColumn")}),textHelperWrapperRight:c("<div />",{"class":"motopress-text-helper-wrapper-right",text:localStorage.getItem("helperNewColumn")}),textHelperHalfSize:null,lineHelperThickness:null,lineHelperHalfThickness:null,handleMiddleHalfThickness:null,moreHandler:null,helperContainer:c("<div />",{"class":"motopress-helper-container"}).appendTo("body"),
newBlock:c("<div />",{"class":"mp-span1 motopress-span"}),spaceClass:"motopress-space",resizer:new CE.Resizer,tools:new CE.Tools,canDrop:!1,setup:function(){this.overlay.append(this.handleIntermediate.clone(),this.handleLeft.clone(),this.handleTopIn,this.handleBottomIn,this.handleLeftOut,this.handleRightOut,this.handleLeftIn,this.handleRightIn,this.handleRight.clone());this.helper.append(this.overlay,this.focusArea.clone(),this.dragHandle.clone(),this.resizer.splitter.clone());this.emptySpanOverlay.append(this.handleIntermediate.clone(),
this.handleLeft.clone(),this.handleInsert.clone(),this.handleRight.clone());this.emptySpanHelper.append(this.emptySpanOverlay,this.resizer.splitter.clone());this.handleWrapperLeft.append(this.wrapperHelperContainer.clone());this.handleWrapperRight.append(this.wrapperHelperContainer.clone());this.wrapperHelper.append(this.handleIntermediate.clone(),this.handleLeft.clone(),this.handleRight.clone());this.wrapperHelperResizer.append(this.resizer.splitter.clone());var a=setTimeout(function(){CE.DragDrop.myThis.textHelperHalfSize=
Math.round(CE.DragDrop.myThis.textHelperHandleMiddle.height()/2);CE.DragDrop.myThis.lineHelperThickness=CE.DragDrop.myThis.lineHelperLeftIn.outerWidth();CE.DragDrop.myThis.lineHelperHalfThickness=Math.round(CE.DragDrop.myThis.lineHelperHandleMiddle.height()/2);CE.DragDrop.myThis.handleMiddleHalfThickness=Math.round(3);clearTimeout(a)},0);c(".motopress-content-wrapper").append(this.emptySceneHelper);this.helperContainer.append(this.lineHelperIntermediate,this.lineHelperLeftOut,this.lineHelperRightOut,
this.lineHelperLeft,this.lineHelperRight,this.lineHelperLeftIn,this.lineHelperRightIn,this.lineHelperTopIn,this.lineHelperBottomIn,this.lineHelperHandleMiddle,this.lineHelperInsert,this.textHelperIntermediate,this.textHelperLeftOut,this.textHelperRightOut,this.textHelperLeft,this.textHelperRight,this.textHelperLeftIn,this.textHelperRightIn,this.textHelperTopIn,this.textHelperBottomIn,this.textHelperHandleMiddle,this.textHelperInsert)},init:function(){CE.DragDrop.myThis=this;this.main();parent.MP.Preloader.myThis.load(CE.DragDrop.shortName)},
main:function(){this.moreHandler=c(".motopress-content-wrapper > .motopress-more-handler");this.addEmptySceneHelper();this.addHandleMoreDisable();this.recursiveAddHandleMiddle(c(".motopress-content-wrapper"));this.makeEditable(c('.motopress-content-wrapper [class*="span"].motopress-span:not(.motopress-empty)'));this.makeRowEditable(c(".motopress-content-wrapper .motopress-row"));this.makeEditableEmptySpan(c('.motopress-content-wrapper [class*="span"].motopress-span.motopress-empty'));this.resizer.updateBottomInHandleMiddle();
this.resizer.updateSplitterHeight(null,"init");this.resizer.updateSplittableOptions(null,null,null,"init");this.resizer.updateHandle();this.resizer.updateHandleMiddle();this.makeDraggableMoreHandler()},isEmptyScene:function(){return c(".motopress-content-wrapper .mp-row-fluid").length?!1:!0},addEmptySceneHelper:function(){this.makeEmptySceneHelperDroppable();this.makeEmptySceneHelperFocusable();this.isEmptyScene()&&(this.emptySceneHelper.show(),this.moreHandler.hide())},addHandleMoreDisable:function(){c(".motopress-content-wrapper").prepend(c("<section />",
{"class":"motopress-handle-more-disable","data-motopress-position":"more-disable"}))},makeEmptySceneHelperFocusable:function(){c(".motopress-empty-scene-type-here").on("focusin",function(){CE.DragDrop.myThis.emptySceneHelper.hide().css("opacity",1);var a=c(this).closest(".mp-row-fluid.motopress-row"),b=CE.DragDrop.myThis.newBlock.clone();b.removeClass("mp-span1").addClass("mp-span12");var d={helper:c("<div />",{"data-motopress-close-type":CE.LeftBar.myThis.library.mp_text.objects.mp_text.closeType,
"data-motopress-shortcode":CE.LeftBar.myThis.library.mp_text.objects.mp_text.id,"data-motopress-group":CE.LeftBar.myThis.library.mp_text.id,"data-motopress-resize":CE.LeftBar.myThis.library.mp_text.objects.mp_text.resize})},e=CE.LeftBar.myThis.library.mp_text.objects.mp_text.parameters;if(!c.isEmptyObject(e)){var f={};c.each(e,function(a){f[a]={}});d.helper.attr("data-motopress-parameters",JSON.stringify(f))}e=CE.Style.props;if(!c.isEmptyObject(e)){var g={};c.each(e,function(a){g[a]={}});d.helper.attr("data-motopress-styles",
JSON.stringify(g))}CE.DragDrop.myThis.makeEditable(b,d,!0);a=b.wrap('<div class="mp-row-fluid motopress-row" />').closest(".mp-row-fluid.motopress-row");c(".motopress-content-wrapper").append(a);var h=setTimeout(function(){CE.DragDrop.myThis.addHandleMiddle(a,"mp-span12");clearTimeout(h)},0),k=setTimeout(function(){CE.Selectable.myThis.select(b.find(".motopress-drag-handle"));CE.DragDrop.myThis.makeDroppable();CE.DragDrop.myThis.resizer.updateBottomInHandleMiddle();CE.Resizer.myThis.updateSplitterHeight(b,
"drop");CE.Resizer.myThis.updateSplittableOptions(b,null,a);CE.DragDrop.myThis.resizer.updateHandle();CE.DragDrop.myThis.resizer.updateHandleMiddle();clearTimeout(k)},0);parent.CE.Save.changeContent();CE.DragDrop.myThis.moreHandler.show()})},makeSpanSelectable:function(a){var b=c("<div />",{"class":"motopress-span-select-handle"});a.children(".motopress-helper").append(b.clone())},makeRowEditable:function(a,b){b="undefined"!==typeof b&&b?!0:!1;a.each(function(){var a=c(this);if(!a.children(".motopress-row-helper").length){var e=
c("<span />",{"class":"motopress-row-helper"}),f=c("<div />",{"class":"motopress-row-select-handle"});e.append(f.clone());a.append(e.clone());f=a.attr("data-motopress-shortcode");!b&&f||CE.DragDrop.myThis.setAttrs(a)}"undefined"===typeof a.controller(CE.Controls)&&a.ce_controls({isNew:b});e=a.controller(CE.Controls);!b&&f||!e||(e.setDefaultStyle(),a="undefined"!==typeof a.attr("data-motopress-parameters")?a.attr("data-motopress-parameters"):null,e.setDefaultAttrs(a),e.saveStyle())})},makeEditable:function(a,
b,d){d="undefined"!==typeof d&&d?!0:!1;a.each(function(){var a=c(this);if(!a.closest(".motopress-block-content").length){CE.DragDrop.myThis.addHelpers(a);CE.DragDrop.myThis.resizer.makeResizable(a);CE.DragDrop.myThis.resizer.makeSplittable(a);CE.DragDrop.myThis.makeDraggable(a);CE.DragDrop.myThis.makeDroppable();"undefined"!==typeof b&&null!==b&&CE.DragDrop.myThis.setAttrs(a,b);d&&a.addClass("motopress-new-object");a.ce_controls({isNew:d});var f=a.controller(CE.Controls);d&&f&&(f.setDefaultStyle(),
f.saveStyle());f=a.children(".motopress-block-content");if(f.length){f=f.children("[data-motopress-shortcode]");d&&f.addClass("motopress-new-object");switch(f.attr("data-motopress-shortcode")){case "mp_text":case "mp_heading":f.ce_inline_editor({isNew:d});break;case "mp_code":f.ce_code_editor({isNew:d});break;default:f.ce_controls({isNew:d})}(f=f.controller(CE.Controls))&&(d?f.renderShortcode(d):f.render(!1))}a.children(".motopress-span-select-handle").length||CE.DragDrop.myThis.makeSpanSelectable(a)}})},
makeEditableEmptySpan:function(a){if(a.length){a.each(function(){c(this).children(".motopress-helper").length||c(this).append(CE.DragDrop.myThis.emptySpanHelper.clone())});var b=setTimeout(function(){CE.DragDrop.myThis.makeDroppable();clearTimeout(b)},0);this.resizer.makeSplittable(a)}},addHelpers:function(a){a.each(function(){c(this).children(".motopress-block-content").length||c(this).children(".mp-row-fluid.motopress-row").length||(c(this).find("script").remove().end().wrapInner(CE.DragDrop.myThis.blockContent.clone()),
c(this).children(".motopress-block-content").children().length||c(this).children(".motopress-block-content").append("<div />"));if(!c(this).children(".motopress-helper").length)if(c(this).children(".mp-row-fluid.motopress-row").length){c(this).attr("data-motopress-wrapper-id",CE.DragDrop.myThis.wrapperId);c(this).prepend(CE.DragDrop.myThis.wrapperHelperResizer.clone());var a=null;c(this).parent(".mp-row-fluid.motopress-row").parent(".motopress-content-wrapper").length?(a=CE.DragDrop.myThis.wrapperHelper.clone(),
c(this).prepend(a)):a=c(this).closest('[class*="span"].motopress-span:has(".motopress-wrapper-helper")').children(".motopress-wrapper-helper");CE.DragDrop.myThis.addHandleWrapper(a);CE.DragDrop.myThis.droppableHandleWrapper(a);CE.DragDrop.myThis.wrapperId++}else c(this).append(CE.DragDrop.myThis.helper.clone())})},setAttrs:function(a,b){this._setAttrs(a);var c=a.find("> .motopress-block-content > div");if(c.length){var e=b.draggable?b.draggable:b.helper,f={closeType:e.attr("data-motopress-close-type"),
id:e.attr("data-motopress-shortcode"),group:e.attr("data-motopress-group"),resize:e.attr("data-motopress-resize")},g=e.attr("data-motopress-parameters");"undefined"!==typeof g&&(f.parameters=g);e=e.attr("data-motopress-styles");"undefined"!==typeof e&&(f.styles=e);this._setAttrs(c,f)}},_setAttrs:function(a,b){if("undefined"===typeof b){var c=a.hasClass("mp-row-fluid")?"mp_row":"mp_span";CE.LeftBar.myThis.setAttrs(a,CE.LeftBar.myThis.library.mp_grid.id,CE.LeftBar.myThis.library.mp_grid.objects[c])}else a.attr({"data-motopress-close-type":b.closeType,
"data-motopress-shortcode":b.id,"data-motopress-group":b.group,"data-motopress-resize":b.resize}),b.hasOwnProperty("parameters")&&a.attr("data-motopress-parameters",b.parameters),b.hasOwnProperty("styles")&&a.attr("data-motopress-styles",b.styles)},makeDraggable:function(a){var b=this,d=a.find(".motopress-drag-handle");a.draggable({cursor:"move",distance:5,helper:"clone",handle:".motopress-drag-handle",opacity:"0",zIndex:1,appendTo:".motopress-content-wrapper:first",start:function(){CE.LeftBar.myThis.disable();
b.canDrop=!0;CE.Selectable.myThis.unselect(d);c(".motopress-splitter").addClass("motopress-hide");c(this).css("opacity",.3);c('.motopress-content-wrapper [class*="span"].motopress-span .motopress-drag-handle').addClass("motopress-start-drag")},stop:function(a,b){CE.LeftBar.myThis.enable();c(".motopress-splitter").removeClass("motopress-hide");c(this).css("opacity","");c('.motopress-content-wrapper [class*="span"].motopress-span .motopress-drag-handle').removeClass("motopress-start-drag");CE.Selectable.myThis.select(d);
CE.DragDrop.myThis.helperContainer.children().hide()},drag:function(){CE.DragDrop.myThis.onDrag()}}).removeClass("ui-draggable")},makeDraggableMoreHandler:function(){var a=null,b=null,d=null,e=null;CE.DragDrop.myThis.moreHandler.draggable({cursor:"move",zIndex:10002,axis:"y",cursorAt:{top:15},helper:"clone",appendTo:".motopress-content-wrapper:first",start:function(f,g){c(this).hide();CE.DragDrop.myThis.makeDroppableForMore();a=c(".motopress-content-wrapper > .motopress-handle-more-disable").height();
b=c(".motopress-content-wrapper > .motopress-handle-middle-in:first");d=parseInt(b.css("top"));e=b.height();var h=e-a;b[0].style.setProperty("top",d+a+"px","important");b[0].style.setProperty("height",h+"px","important");var k=CE.LeftBar.myThis.leftBar.width(),h=c('.motopress-content-wrapper > .motopress-handle-middle-in:not(":first, :last")');h.length&&(k=h.eq(0).offset().left-k-parent.CE.Navbar.myThis.scrollWidth/2,h.css({"margin-left":-k,"margin-right":-k,width:"+="+2*k+"px"}),k=c("#motopress-container").offset().left-
h.eq(0).offset().left-3,h.css({"padding-left":k}));h=c(".motopress-content-wrapper").children(".motopress-handle-middle-in:last, .motopress-handle-middle-in:first, .motopress-handle-more-disable");k=c("#motopress-container").offset().left-h.eq(0).offset().left-3;h.css("padding-left",k);CE.LeftBar.myThis.disable();h=c('.motopress-content-wrapper [class*="span"] .motopress-drag-handle.'+CE.Selectable.myThis.selectedClass);h.length&&CE.Selectable.myThis.unselect(h);c(".motopress-splitter").addClass("motopress-hide");
g.helper.data("dropped",!1);c(".motopress-content-wrapper").children(".motopress-handle-middle-in, .motopress-handle-more-disable").addClass("motopress-more-dragging")},stop:function(a,g){c(".motopress-content-wrapper").children(".motopress-handle-middle-in, .motopress-handle-more-disable").removeClass("motopress-more-dragging");c(this).show();CE.DragDrop.myThis.makeDroppable();b=c(".motopress-content-wrapper > .motopress-handle-middle-in:first");b[0].style.setProperty("top",d+"px","important");b[0].style.setProperty("height",
e+"px","important");c('.motopress-handle-middle-in:not(":first, :last")').css({"margin-left":"","margin-right":"",width:""});c(".motopress-content-wrapper").find(".motopress-handle-middle-in, .motopress-handle-more-disable").css({"padding-left":""});CE.LeftBar.myThis.enable();c(".motopress-splitter").removeClass("motopress-hide");CE.DragDrop.myThis.helperContainer.children().hide();!0===g.helper.data("dropped")&&parent.CE.Save.changeContent()}})},makeDraggableNewBlock:function(){var a=this;c(".motopress-ce-object").draggable({cursor:"move",
cursorAt:{top:-10,left:-10},helper:"clone",zIndex:10002,appendTo:".motopress-content-wrapper:first",start:function(b,d){CE.LeftBar.myThis.disable();a.canDrop=!0;var e=c('.motopress-content-wrapper [class*="span"] .motopress-drag-handle.'+CE.Selectable.myThis.selectedClass);e.length&&CE.Selectable.myThis.unselect(e);c(".motopress-empty-scene-type-here").addClass("motopress-empty-scene-type-here-nohover");d.helper.children(".motopress-ce-object-inner").css("cssText","box-shadow: none !important");c(this).closest(".popover").prev('.motopress-leftbar-group[data-clickover-open="1"]').trigger("mousedown");
c(".motopress-splitter").addClass("motopress-hide");c('.motopress-content-wrapper [class*="span"].motopress-span .motopress-drag-handle').addClass("motopress-start-drag");d.helper.data("dropped",!1)},stop:function(a,d){CE.LeftBar.myThis.enable();c(".motopress-empty-scene-type-here").removeClass("motopress-empty-scene-type-here-nohover");c(".motopress-splitter").removeClass("motopress-hide");c('.motopress-content-wrapper [class*="span"].motopress-span .motopress-drag-handle').removeClass("motopress-start-drag");
!1===d.helper.data("dropped")&&CE.DragDrop.myThis.dropOnStageHandler(a,d)&&parent.CE.Save.changeContent();CE.DragDrop.myThis.helperContainer.children().hide()},drag:function(){CE.DragDrop.myThis.onDrag()}})},onDrag:function(){var a=c(".motopress-droppable-hover");if(a.length){if(a=a.attr("data-motopress-position"),null!==a){var a=".motopress-line-helper-"+a+", .motopress-text-helper-"+a,b=this.helperContainer.children();b.not(a).hide();b.filter(a).show()}}else this.helperContainer.children().hide()},
dropOnStageHandler:function(a,b){var d=b.helper.hasClass("motopress-ce-object"),e=c(".motopress-content-wrapper").find(".motopress-handle-middle-in:last");if(d&&e&&e.hasClass("motopress-handle-middle-in")){var f,g=CE.DragDrop.myThis,h=g.newBlock.clone();"mp_space"===b.helper.attr("data-motopress-shortcode")&&h.addClass(g.spaceClass);g.makeEditable(h,b,!0);parent.MP.Utils.getSpanClass(h.prop("class").split(" "));f=h.wrap('<div class="mp-row-fluid motopress-row" />').closest(".mp-row-fluid.motopress-row");
e.after(f);CE.DragDrop.myThis.makeRowEditable(f,d);var k=setTimeout(function(){g.addHandleMiddle(f,"motopress-content-wrapper");g.resize(void 0,h,"middle",null);var a=h.find(".motopress-drag-handle");CE.Selectable.myThis.select(a);g.makeDroppable();CE.DragDrop.myThis.resizer.updateBottomInHandleMiddle();CE.Resizer.myThis.updateSplitterHeight(h,"drop");CE.Resizer.myThis.updateSplittableOptions(h,void 0,f);CE.DragDrop.myThis.resizer.updateHandle();CE.DragDrop.myThis.resizer.updateHandleMiddle();clearTimeout(k)},
0);return!0}return!1},makeEmptySceneHelperDroppable:function(){var a=this;this.emptySceneHelper.droppable({accept:".motopress-ce-object",tolerance:"pointer",drop:function(b,d){if(a.canDrop)a.canDrop=!1;else return!1;CE.DragDrop.myThis.emptySceneHelper.hide().css("opacity",1);var e=c(this).closest('[class*="span"].motopress-span');0==e.length&&(e=c(this));var f=parent.MP.Utils.getSpanClass(e.prop("class").split(" ")),g=e=null,h=c(this).closest(".mp-row-fluid.motopress-row"),k=null,l=d.draggable.hasClass("motopress-ce-object");
l?(k=CE.DragDrop.myThis.newBlock.clone(),"mp_space"===d.draggable.attr("data-motopress-shortcode")&&k.addClass(CE.DragDrop.myThis.spaceClass),CE.DragDrop.myThis.makeEditable(k,d,!0),g=null):(k=d.draggable,g=k.parent(".mp-row-fluid.motopress-row"));var e=parent.MP.Utils.getSpanClass(k.prop("class").split(" ")),e=CE.DragDrop.myThis.removeEmptyBlocks(k,e),n=!1;null==f&&(f="mp-span12",n=!0);h=k.wrap('<div class="mp-row-fluid motopress-row" />').closest(".mp-row-fluid.motopress-row");c(".motopress-content-wrapper").append(h);
CE.DragDrop.myThis.makeRowEditable(h,l);var m=setTimeout(function(){g=CE.DragDrop.myThis.clearIfEmpty(g);n&&(f="motopress-content-wrapper");CE.DragDrop.myThis.addHandleMiddle(h,f);CE.DragDrop.myThis.resize(g,k,"middle");clearTimeout(m)},0),p=setTimeout(function(){var a=k.find(".motopress-drag-handle");CE.Selectable.myThis.select(a);CE.DragDrop.myThis.makeDroppable();CE.DragDrop.myThis.resizer.updateBottomInHandleMiddle();CE.Resizer.myThis.updateSplitterHeight(k,"drop");CE.Resizer.myThis.updateSplittableOptions(k,
g,h);CE.DragDrop.myThis.resizer.updateHandle();CE.DragDrop.myThis.resizer.updateHandleMiddle();clearTimeout(p)},0);CE.DragDrop.myThis.moreHandler.show();parent.CE.Save.changeContent()},over:function(){c(this).css("opacity",.5)},out:function(){c(this).css("opacity",1)}})},makeDroppableForMore:function(){c(".motopress-content-wrapper").children(".motopress-handle-middle-in, .motopress-handle-more-disable").droppable({accept:".motopress-more-handler",tolerance:"pointer",hoverClass:"motopress-droppable-hover",
drop:function(a,b){b.helper.data("dropped",!0);b.draggable.insertBefore(c(this));b.draggable.css("top","");switch(c(this).attr("data-motopress-position")){case "middle-in":b.draggable.removeClass("motopress-more-handler-disabled");break;case "more-disable":b.draggable.addClass("motopress-more-handler-disabled"),b.draggable.css("top",-parseInt(c("#motopress-container").css("padding-top")))}},over:function(){},out:function(){}})},makeDroppable:function(){var a=this;c(".motopress-content-wrapper").find(".motopress-handle-intermediate, .motopress-handle-left, .motopress-handle-top-in, .motopress-handle-bottom-in, .motopress-handle-left-out, .motopress-handle-right-out, .motopress-handle-left-in, .motopress-handle-right-in, .motopress-handle-middle-in, .motopress-handle-insert, .motopress-handle-right").droppable({accept:'[class*="span"].motopress-span, .motopress-ce-object',
tolerance:"pointer",hoverClass:"motopress-droppable-hover",drop:function(b,d){if(a.canDrop)a.canDrop=!1;else return!1;var e=c(this).attr("data-motopress-position");d.helper.data("dropped",!0);var f=c(this).closest('[class*="span"].motopress-span');0===f.length&&(f=c(this));var g=parent.MP.Utils.getSpanClass(f.prop("class").split(" ")),h=null,k=null,l=c(this).closest(".mp-row-fluid.motopress-row"),n=null,m=null,p=d.draggable.hasClass("motopress-ce-object");p?(n=null,m=CE.DragDrop.myThis.newBlock.clone(),
"mp_space"===d.draggable.attr("data-motopress-shortcode")&&m.addClass(CE.DragDrop.myThis.spaceClass),CE.DragDrop.myThis.makeEditable(m,d,!0),k=null):(n=d,m=n.draggable,k=m.parent(".mp-row-fluid.motopress-row"));h=parent.MP.Utils.getSpanClass(m.prop("class").split(" "));h=CE.DragDrop.myThis.removeEmptyBlocks(m,h);switch(e){case "top-in":var e=m.wrap('<div class="mp-row-fluid motopress-row" />').closest(".mp-row-fluid.motopress-row"),q=f.wrap('<div class="mp-row-fluid motopress-row" />').closest(".mp-row-fluid.motopress-row").wrap('<div class="'+
g+' motopress-span" />');q.before(e);CE.DragDrop.myThis.makeRowEditable(e.add(q),p);f=q.parent('[class*="span"].motopress-span');f.attr({"data-motopress-wrapper-id":CE.DragDrop.myThis.wrapperId}).prepend(CE.DragDrop.myThis.wrapperHelperResizer.clone());CE.DragDrop.myThis.resizer.makeSplittable(f);p=null;f.parent(".mp-row-fluid.motopress-row").parent(".motopress-content-wrapper").length?(p=CE.DragDrop.myThis.wrapperHelper.clone(),f.prepend(p)):p=f.closest('[class*="span"].motopress-span:has(".motopress-wrapper-helper")').children(".motopress-wrapper-helper");
CE.DragDrop.myThis.makeEditable(f,d,!0);CE.DragDrop.myThis.addHandleWrapper(p);CE.DragDrop.myThis.droppableHandleWrapper(p);CE.DragDrop.myThis.wrapperId++;var s=setTimeout(function(){k=CE.DragDrop.myThis.clearIfEmpty(k);CE.DragDrop.myThis.addHandleMiddle(q,g);CE.DragDrop.myThis.resize(k,m,"top-in");clearTimeout(s)},0);break;case "bottom-in":e=m.wrap('<div class="mp-row-fluid motopress-row" />').closest(".mp-row-fluid.motopress-row");q=f.wrap('<div class="mp-row-fluid motopress-row" />').closest(".mp-row-fluid.motopress-row").wrap('<div class="'+
g+' motopress-span" />');q.after(e);CE.DragDrop.myThis.makeRowEditable(e.add(q),p);f=q.parent('[class*="span"].motopress-span');f.attr({"data-motopress-wrapper-id":CE.DragDrop.myThis.wrapperId}).prepend(CE.DragDrop.myThis.wrapperHelperResizer.clone());CE.DragDrop.myThis.resizer.makeSplittable(f);p=null;f.parent(".mp-row-fluid.motopress-row").parent(".motopress-content-wrapper").length?(p=CE.DragDrop.myThis.wrapperHelper.clone(),f.prepend(p)):p=f.closest('[class*="span"].motopress-span:has(".motopress-wrapper-helper")').children(".motopress-wrapper-helper");
CE.DragDrop.myThis.makeEditable(f,d,!0);CE.DragDrop.myThis.addHandleWrapper(p);CE.DragDrop.myThis.droppableHandleWrapper(p);CE.DragDrop.myThis.wrapperId++;s=setTimeout(function(){k=CE.DragDrop.myThis.clearIfEmpty(k);CE.DragDrop.myThis.addHandleMiddle(q,g);CE.DragDrop.myThis.resize(k,m,"bottom-in");clearTimeout(s)},0);break;case "left-out":case "left":case "intermediate":CE.DragDrop.myThis.canInsert(l,n)&&(f.parent().length&&f.before(m),s=setTimeout(function(){k=CE.DragDrop.myThis.clearIfEmpty(k);
if(null===k||k[0]!==l[0])CE.DragDrop.myThis.resize(k,m,"left-out");else{var a=parent.MP.Utils.calcSpanNumber(k,n);m.removeClass(h).addClass("mp-span"+(12-a))}clearTimeout(s)},0));break;case "right-out":case "right":CE.DragDrop.myThis.canInsert(l,n)&&(f.parent().length&&f.after(m),s=setTimeout(function(){k=CE.DragDrop.myThis.clearIfEmpty(k);if(null===k||k[0]!==l[0])CE.DragDrop.myThis.resize(k,m,"right-out");else{var a=parent.MP.Utils.calcSpanNumber(k,n);m.removeClass(h).addClass("mp-span"+(12-a))}clearTimeout(s)},
0));break;case "left-in":CE.DragDrop.myThis.canInsert(l,n)&&1<parent.MP.Utils.getSpanNumber(g)&&(q=f.wrap('<div class="mp-row-fluid motopress-row" />').closest(".mp-row-fluid.motopress-row").wrap('<div class="'+g+' motopress-span" />'),f.before(m),CE.DragDrop.myThis.makeRowEditable(q,p),f=q.parent('[class*="span"].motopress-span'),f.attr({"data-motopress-wrapper-id":CE.DragDrop.myThis.wrapperId}).prepend(CE.DragDrop.myThis.wrapperHelperResizer.clone()),CE.DragDrop.myThis.resizer.makeSplittable(f),
p=null,f.parent(".mp-row-fluid.motopress-row").parent(".motopress-content-wrapper").length?(p=CE.DragDrop.myThis.wrapperHelper.clone(),f.prepend(p)):p=f.closest('[class*="span"].motopress-span:has(".motopress-wrapper-helper")').children(".motopress-wrapper-helper"),CE.DragDrop.myThis.makeEditable(f,d,!0),CE.DragDrop.myThis.addHandleWrapper(p),CE.DragDrop.myThis.droppableHandleWrapper(p),CE.DragDrop.myThis.wrapperId++,s=setTimeout(function(){k=CE.DragDrop.myThis.clearIfEmpty(k);CE.DragDrop.myThis.addHandleMiddle(q,
g);CE.DragDrop.myThis.resize(k,m,"left-in");clearTimeout(s)},0));break;case "right-in":CE.DragDrop.myThis.canInsert(l,n)&&1<parent.MP.Utils.getSpanNumber(g)&&(q=f.wrap('<div class="mp-row-fluid motopress-row" />').closest(".mp-row-fluid.motopress-row").wrap('<div class="'+g+' motopress-span" />'),f.after(m),CE.DragDrop.myThis.makeRowEditable(q,p),f=q.parent('[class*="span"].motopress-span'),f.attr({"data-motopress-wrapper-id":CE.DragDrop.myThis.wrapperId}).prepend(CE.DragDrop.myThis.wrapperHelperResizer.clone()),
CE.DragDrop.myThis.resizer.makeSplittable(f),p=null,f.parent(".mp-row-fluid.motopress-row").parent(".motopress-content-wrapper").length?(p=CE.DragDrop.myThis.wrapperHelper.clone(),f.prepend(p)):p=f.closest('[class*="span"].motopress-span:has(".motopress-wrapper-helper")').children(".motopress-wrapper-helper"),CE.DragDrop.myThis.makeEditable(f,d,!0),CE.DragDrop.myThis.addHandleWrapper(p),CE.DragDrop.myThis.droppableHandleWrapper(p),CE.DragDrop.myThis.wrapperId++,s=setTimeout(function(){k=CE.DragDrop.myThis.clearIfEmpty(k);
CE.DragDrop.myThis.addHandleMiddle(q,g);CE.DragDrop.myThis.resize(k,m,"right-in");clearTimeout(s)},0));break;case "middle-in":var u=!1;null==g&&(g="mp-span12 motopress-span",u=!0);var t=parseInt(c(this).css("min-height"));c(this).siblings(".motopress-handle-middle-in").add(this).each(function(){c(this).height(t)});c(".motopress-content-wrapper > .motopress-handle-middle-in:last").height("");l=m.wrap('<div class="mp-row-fluid motopress-row" />').closest(".mp-row-fluid.motopress-row");c(this).after(l);
CE.DragDrop.myThis.makeRowEditable(l,p);s=setTimeout(function(){k=CE.DragDrop.myThis.clearIfEmpty(k);u&&(g="motopress-content-wrapper");CE.DragDrop.myThis.addHandleMiddle(l,g);CE.DragDrop.myThis.resize(k,m,"middle");clearTimeout(s)},0);break;case "insert":f.parent().length&&f.replaceWith(m),s=setTimeout(function(){k=CE.DragDrop.myThis.clearIfEmpty(k);CE.DragDrop.myThis.resize(k,m,"insert");clearTimeout(s)},0)}var r=setTimeout(function(){var a=m.find(".motopress-drag-handle");CE.Selectable.myThis.select(a);
CE.DragDrop.myThis.makeDroppable();CE.DragDrop.myThis.resizer.updateBottomInHandleMiddle();CE.Resizer.myThis.updateSplitterHeight(m,"drop");CE.Resizer.myThis.updateSplittableOptions(m,k,l);CE.DragDrop.myThis.resizer.updateHandle();CE.DragDrop.myThis.resizer.updateHandleMiddle();clearTimeout(r)},0);parent.CE.Save.changeContent()},over:function(){var a=c(this).attr("data-motopress-position"),d="middle-in"!==a?c(this).closest('[class*="span"].motopress-span'):c(this);CE.DragDrop.myThis.showLineTextHelper(d,
a)},out:function(){c(this).attr("data-motopress-position");a.onDrag()}})},showLineTextHelper:function(a,b){var d=a.offset(),e,f,g;0<=c.inArray(b,["intermediate","left-out","right-out","left","right"])&&(g=Math.floor(a.children(".motopress-helper, .motopress-wrapper-helper").find(".motopress-handle-intermediate").width()),4<g?(e=2,f=g-4,g-=e):(e=1,f=g));switch(b){case "intermediate":this.lineHelperIntermediate.css({width:f,height:a.parent().height(),top:d.top-parseInt(a.css("margin-top")),left:Math.ceil(d.left-
g)}).show();this.textHelperIntermediate.css({top:this.lineHelperIntermediate.offset().top,left:this.lineHelperIntermediate.offset().left+f}).show();break;case "left-out":this.lineHelperLeftOut.css({width:f,height:a.parent().height(),top:d.top-parseInt(a.css("margin-top")),left:Math.ceil(d.left-g)}).show();this.textHelperLeftOut.css({top:this.lineHelperLeftOut.offset().top,left:this.lineHelperLeftOut.offset().left+f}).show();break;case "right-out":var h=a.next('[class*="mp-span"]');this.lineHelperRightOut.css({width:f,
height:a.parent().height(),top:d.top-parseInt(a.css("margin-top")),left:Math.ceil(h.length?h.offset().left-g:d.left+a.outerWidth()+e)}).show();this.textHelperRightOut.css({top:this.lineHelperRightOut.offset().top,left:this.lineHelperRightOut.offset().left+f}).show();break;case "left":this.lineHelperLeft.css({width:f,height:a.parent().height(),top:d.top-parseInt(a.css("margin-top")),left:Math.ceil(d.left-g)}).show();this.textHelperLeft.css({top:this.lineHelperLeft.offset().top,left:this.lineHelperLeft.offset().left+
f}).show();break;case "right":h=a.next('[class*="mp-span"]');this.lineHelperRight.css({width:f,height:a.parent().height(),top:d.top-parseInt(a.css("margin-top")),left:Math.ceil(h.length?h.offset().left-g:d.left+a.outerWidth()+e)}).show();this.textHelperRight.css({top:this.lineHelperRight.offset().top,left:this.lineHelperRight.offset().left+f}).show();break;case "left-in":this.lineHelperLeftIn.css({height:a.outerHeight(),top:d.top,left:d.left}).show();this.textHelperLeftIn.css({top:this.lineHelperLeftIn.offset().top,
left:this.lineHelperLeftIn.offset().left+this.lineHelperThickness}).show();break;case "right-in":this.lineHelperRightIn.css({height:a.outerHeight(),top:d.top,left:d.left+a.outerWidth()-this.lineHelperThickness}).show();this.textHelperRightIn.css({top:this.lineHelperRightIn.offset().top,left:this.lineHelperRightIn.offset().left-this.textHelperRightIn.outerWidth()}).show();break;case "top-in":this.lineHelperTopIn.css({width:a.outerWidth(),top:d.top,left:d.left}).show();this.textHelperTopIn.css({top:d.top,
left:d.left}).show();break;case "bottom-in":this.lineHelperBottomIn.css({width:a.outerWidth(),top:d.top+a.outerHeight()-this.lineHelperThickness,left:d.left}).show();this.textHelperBottomIn.css({top:this.lineHelperBottomIn.offset().top,left:this.lineHelperBottomIn.offset().left}).show();break;case "middle-in":g=a.width();f=a.height()-2*parseInt(this.lineHelperHandleMiddle.css("outline-width"));d=a.offset();e=d.top+parseInt(this.lineHelperHandleMiddle.css("outline-width"));h=d.left;d=c(".motopress-content-wrapper > .motopress-handle-middle-in:first");
if(a[0]===d[0]||a[0]===c(".motopress-content-wrapper > .motopress-handle-middle-in:last")[0])g=c(".motopress-content-wrapper"),h=g.offset(),g=g.width(),f=20,a[0]===d[0]&&(e=h.top-f),h=h.left;this.lineHelperHandleMiddle.css({width:g,height:f,top:e,left:h}).show();g=this.lineHelperHandleMiddle.offset();this.textHelperHandleMiddle.css({top:g.top,left:g.left}).show();break;case "insert":this.lineHelperInsert.css({width:a.width(),height:a.outerHeight(),left:d.left,top:d.top}).show();this.textHelperInsert.css({top:this.lineHelperInsert.offset().top,
left:this.lineHelperInsert.offset().left-this.textHelperInsert.outerWidth()}).show();break;case "wrapper-left":this.lineHelperWrapperLeft.css({height:a.height(),top:d.top,left:d.left-this.lineHelperThickness}).show();this.textHelperWrapperLeft.css({top:this.lineHelperWrapperLeft.offset().top,left:this.lineHelperWrapperLeft.offset().left-this.textHelperWrapperLeft.outerWidth()}).show();break;case "wrapper-right":this.lineHelperWrapperRight.css({height:a.height(),top:d.top,left:d.left+a.width()}).show(),
this.textHelperWrapperRight.css({top:this.lineHelperWrapperRight.offset().top,left:this.lineHelperWrapperRight.offset().left+this.lineHelperThickness}).show()}},removeEmptyBlocks:function(a,b){var c=a.prev(".motopress-empty"),e=a.next(".motopress-empty"),f=0,g=0;"undefined"!=typeof c[0]&&(f=parent.MP.Utils.getSpanNumber(parent.MP.Utils.getSpanClass(c.prop("class").split(" "))));"undefined"!=typeof e[0]&&(g=parent.MP.Utils.getSpanNumber(parent.MP.Utils.getSpanClass(e.prop("class").split(" "))));if("undefined"!=
typeof c[0]||"undefined"!=typeof e[0])a.removeClass(b),b="mp-span"+(parent.MP.Utils.getSpanNumber(b)+f+g),a.addClass(b),c.remove(),e.remove();return b},clearIfEmpty:function(a,b){"undefined"===typeof b&&(b="default");if(null!==a){var d=a.parent(),e=a.children('[class*="span"].motopress-span');if(!e.length){for(e=0;0===a.parent(".motopress-content-wrapper").length&&!a.siblings('.mp-row-fluid.motopress-row, [class*="span"].motopress-span').length&&!a.parent(".motopress-content-wrapper").length;){if(a.parent('[class*="span"].motopress-span').length){var f=
a.parent('[class*="span"].motopress-span').attr("data-motopress-wrapper-id");c('[data-motopress-wrapper-id="'+f+'"].motopress-handle-wrapper').remove()}a.siblings(".motopress-handle-middle-in, .motopress-wrapper-helper, .motopress-helper").remove().end().unwrap();e++;if(100===e){console.log("LOOPED IN `clearIfEmpty()`");break}}e=!1;f=null;a.siblings(".mp-row-fluid.motopress-row").length||(e=!0,a.parent(":not(.motopress-content-wrapper)").length?f=a.parent():a.parent(".mp-row-fluid.motopress-row").length&&
(f=a.parent(".mp-row-fluid.motopress-row")));a.prev(".motopress-handle-middle-in").remove().end().remove();if("undefined"!==typeof d&&null!==d&&!d.hasClass("motopress-content-wrapper")){var g=d.children(".mp-row-fluid");if(1===g.length&&(g=g.children('[class*="span"]:not(.motopress-empty)'),1===g.length)){var h=parent.MP.Utils.getSpanClass(g.prop("class").split(" ")),k=parent.MP.Utils.getSpanClass(d.prop("class").split(" "));g.removeClass(h).addClass(k);d.replaceWith(g)}}return e?f:a}if(1===e.length&&
!a.parent(".motopress-content-wrapper").length){var l,n,m,p=null;e.parentsUntil(".motopress-content-wrapper",'[class*="span"]').each(function(){l=c(this).children(".mp-row-fluid");n=c(this).siblings('[class*="span"]');m=c(this).parent(".mp-row-fluid").parent(".motopress-content-wrapper");if(1===l.length&&(n.length||m.length))return p=c(this),!1});null!==p&&(d=parent.MP.Utils.getSpanClass(e.prop("class").split(" ")),f=parent.MP.Utils.getSpanClass(p.prop("class").split(" ")),e.removeClass(d).addClass(f),
p.replaceWith(e),a="remove"===b?{row:p.parent()}:null)}}return a},recursiveAddHandleMiddle:function(a){a.children(".mp-row-fluid.motopress-row").each(function(a){var d=null,d=CE.DragDrop.myThis.handleMiddleIn;0==a&&c(this).before(d.clone());c(this).next(".motopress-more-handler").length?c(this).next(".motopress-more-handler").after(d.clone()):c(this).after(d.clone());c(this).children('[class*="span"].motopress-span').children(".mp-row-fluid.motopress-row").length&&c(this).children('[class*="span"].motopress-span').each(function(){CE.DragDrop.myThis.recursiveAddHandleMiddle(c(this))})})},
addHandleMiddle:function(a,b){a.parent("."+b+".motopress-span, .motopress-content-wrapper").children(".mp-row-fluid.motopress-row").each(function(a){var b=null,b=CE.DragDrop.myThis.handleMiddleIn;0==a&&(a=c(this).prevAll(".motopress-handle-middle-in"),0==a.length?c(this).before(b.clone()):a.each(function(a,b){0!=a&&c(b).remove()}));a=c(this).nextUntil(".mp-row-fluid.motopress-row",".motopress-handle-middle-in");0==a.length?c(this).next(".motopress-more-handler").length?c(this).next(".motopress-more-handler").after(b.clone()):
c(this).after(b.clone()):a.each(function(a,b){0!=a&&c(b).remove()})})},addHandleWrapper:function(a){a.find(".motopress-handle-wrapper-left > .motopress-wrapper-helper-container").append(this.handleWrapper.clone().attr({"data-motopress-wrapper-id":this.wrapperId,"data-motopress-position":"wrapper-left"}));a.find(".motopress-handle-wrapper-right > .motopress-wrapper-helper-container").append(this.handleWrapper.clone().attr({"data-motopress-wrapper-id":this.wrapperId,"data-motopress-position":"wrapper-right"}))},
droppableHandleWrapper:function(a){a.find(".motopress-handle-wrapper").droppable({accept:'[class*="span"].motopress-span, .motopress-ce-object',tolerance:"pointer",drop:function(a,d){var e=c(this).attr("data-motopress-position");d.helper.data("dropped",!0);var f=c(this).attr("data-motopress-wrapper-id"),f=c('[data-motopress-wrapper-id="'+f+'"][class*="span"].motopress-span'),g=null,h=null,k=f.parent(".mp-row-fluid.motopress-row"),l=null,n=null;d.draggable.hasClass("motopress-ce-object")?(l=null,n=
CE.DragDrop.myThis.newBlock.clone(),"mp_space"===d.draggable.attr("data-motopress-shortcode")&&n.addClass(CE.DragDrop.myThis.spaceClass),CE.DragDrop.myThis.makeEditable(n,d,!0),h=null):(l=d,n=l.draggable,h=n.parent(".mp-row-fluid.motopress-row"));g=parent.MP.Utils.getSpanClass(n.prop("class").split(" "));g=CE.DragDrop.myThis.removeEmptyBlocks(n,g);switch(e){case "wrapper-left":if(CE.DragDrop.myThis.canInsert(k,l)){f.before(n);var m=setTimeout(function(){h=CE.DragDrop.myThis.clearIfEmpty(h);if(null===
h||h[0]!==k[0])CE.DragDrop.myThis.resize(h,n,"wrapper-left");else{var a=parent.MP.Utils.calcSpanNumber(h,l);n.removeClass(g).addClass("mp-span"+(12-a))}clearTimeout(m)},0)}break;case "wrapper-right":CE.DragDrop.myThis.canInsert(k,l)&&(f.after(n),m=setTimeout(function(){h=CE.DragDrop.myThis.clearIfEmpty(h);if(null===h||h[0]!==k[0])CE.DragDrop.myThis.resize(h,n,"wrapper-right");else{var a=parent.MP.Utils.calcSpanNumber(h,l);n.removeClass(g).addClass("mp-span"+(12-a))}clearTimeout(m)},0))}var p=setTimeout(function(){var a=
n.find(".motopress-drag-handle");CE.Selectable.myThis.select(a);CE.DragDrop.myThis.makeDroppable();CE.DragDrop.myThis.resizer.updateBottomInHandleMiddle();CE.Resizer.myThis.updateSplitterHeight(n,"drop");CE.Resizer.myThis.updateSplittableOptions(n,h,k);CE.DragDrop.myThis.resizer.updateHandle();CE.DragDrop.myThis.resizer.updateHandleMiddle();clearTimeout(p)},0);parent.CE.Save.changeContent()},over:function(){var a=c(this).closest('[class*="span"].motopress-span');CE.DragDrop.myThis.showLineTextHelper(a,
c(this).attr("data-motopress-position"))},out:function(){}})},canInsert:function(a,b){var d=0;a.children('[class*="span"].motopress-span').each(function(){parent.MP.Utils.notClone(c(this),b)&&!c(this).hasClass("motopress-empty")&&d++});return 12<=d?(CE.DragDrop.interruptInsert=!0,parent.MP.Flash.setFlash(localStorage.getItem("blocksOverflow"),"error"),parent.MP.Flash.showMessage(),!1):!0},resize:function(a,b,d){var e=null,f=null;if(null!==a&&"undefined"!==typeof a){a=a.children('[class*="span"]');
var g=a.length;0<g&&12>=g&&(f=this.getSpanSizeRules(g),a.each(function(a){e=parent.MP.Utils.getSpanClass(c(this).prop("class").split(" "));c(this).removeClass(e).addClass("mp-span"+f[a])}))}a=b.parent();null!==a&&"undefined"!==typeof a&&(a=a.children('[class*="span"]'),g=a.length,0<g&&12>=g&&(f=this.getSpanSizeRules(g),a.each(function(a){e=parent.MP.Utils.getSpanClass(c(this).prop("class").split(" "));c(this).removeClass(e).addClass("mp-span"+f[a])})));"undefined"===typeof d||"top-in"!==d&&"bottom-in"!==
d||(e=parent.MP.Utils.getSpanClass(b.prop("class").split(" ")),b.removeClass(e).addClass("mp-span12"),d="top-in"===d?1:0,b=b.parent(".mp-row-fluid").parent('[class*="span"]').children(".mp-row-fluid").get(d),b=c(b),b=b.children('[class*="span"]'),"undefined"!==typeof b&&b.length&&(e=parent.MP.Utils.getSpanClass(b.prop("class").split(" ")),b.removeClass(e).addClass("mp-span12")))},getSpanSizeRules:function(a){var b=null;switch(a){case 1:b=[12];break;case 2:b=[6,6];break;case 3:b=[4,4,4];break;case 4:b=
[3,3,3,3];break;case 5:b=[3,3,2,2,2];break;case 6:b=[2,2,2,2,2,2];break;case 7:b=[2,2,2,2,2,1,1];break;case 8:b=[2,2,2,2,1,1,1,1];break;case 9:b=[2,2,2,1,1,1,1,1,1];break;case 10:b=[2,2,1,1,1,1,1,1,1,1];break;case 11:b=[2,1,1,1,1,1,1,1,1,1,1];break;case 12:b=[1,1,1,1,1,1,1,1,1,1,1,1]}return b}})});
steal("jquery/class",function(c){c.Class("CE.Selectable",{myThis:null,scrollY:0,focusFlag:!1,blurFlag:!1,setScrollY:function(a){CE.Selectable.scrollY=a},focusWithoutScroll:function(a){if(!CE.Selectable.focusFlag){CE.Selectable.focusFlag=!0;a.focus();window.scrollTo(0,CE.Selectable.scrollY);var b=setTimeout(function(){CE.Selectable.focusFlag=!1;clearTimeout(b)},0)}return a},blurWithoutScroll:function(a){if(!CE.Selectable.blurFlag){CE.Selectable.blurFlag=!0;a.blur();window.scrollTo(0,CE.Selectable.scrollY);
var b=setTimeout(function(){CE.Selectable.blurFlag=!1;clearTimeout(b)},0)}return a}},{selectedClass:"motopress-selected",init:function(){CE.Selectable.myThis=this;c(document).mousedown(function(){CE.Selectable.setScrollY(window.scrollY)});c(document).mouseup(function(){CE.Selectable.setScrollY(window.scrollY)});this.makeSelectable()},makeSelectable:function(){c(".motopress-content-wrapper").on("click",".motopress-drag-handle, .motopress-span-select-handle, .motopress-row-select-handle",function(){if(c(this).hasClass(".motopress-span-select-handle")&&
c(this).closest('[class*="mp-span"]').hasClass(CE.Selectable.myThis.selectedClass)||c(this).hasClass(".motopress-row-select-handle")&&c(this).closest(".motopress-row").hasClass(CE.Selectable.myThis.selectedClass)||c(this).hasClass(CE.Selectable.myThis.selectedClass)){var a=null,a=c(this).hasClass(".motopress-row-select-handle")?c(this).closest(".motopress-row"):c(this).hasClass(".motopress-span-select-handle")?c(this).closest('[class*="mp-span"]'):c(this).parent(".motopress-helper").prev(".motopress-block-content").children("[data-motopress-shortcode]"),
b=a.controller(),b=a.hasClass("ce_inline_editor")?b.isOpen:!1;!(a.hasClass("ce_controls")||a.hasClass("ce_inline_editor")||a.hasClass("ce_code_editor")||a.hasClass(".motopress-row"))||CE.Dialog.myThis.element.dialog("isOpen")||parent.CE.CodeModal.myThis.element.data("modal").isShown||b||CE.Dialog.myThis.open(c(this))}else CE.Selectable.myThis.select(c(this));CE.Selectable.focusWithoutScroll(c(this).prev())});c(".motopress-content-wrapper").on("keydown",".motopress-focus-area",function(a){if(c(this).next().hasClass(CE.Selectable.myThis.selectedClass))if(a.which===
c.ui.keyCode.ESCAPE)CE.Selectable.setScrollY(window.scrollY),CE.Selectable.myThis.unselect();else if(a.which===c.ui.keyCode.DELETE||a.which===c.ui.keyCode.BACKSPACE)a.preventDefault(),CE.Selectable.setScrollY(window.scrollY),CE.Tools.myThis.removeBlock(),parent.CE.Save.changeContent()});c(document).on("click",function(a){c(a.target).hasClass(CE.Selectable.myThis.selectedClass)||c(a.target).hasClass("motopress-span-select-handle")||c(a.target).hasClass("motopress-row-select-handle")||c(a.target).closest("."+
CE.Dialog.myThis.dialogClass).length||CE.InlineEditor.isTinymce(a)||CE.Selectable.myThis.unselect()})},select:function(a){if(!1===CE.DragDrop.interruptInsert){this.unselect();var b=null;CE.Selectable.focusWithoutScroll(a.prev());a.hasClass("motopress-row-select-handle")?(a.closest(".motopress-row").addClass(this.selectedClass),b=a.closest(".motopress-row")):(a.hasClass("motopress-span-select-handle")?a.closest(".motopress-span").addClass(this.selectedClass):a.addClass(this.selectedClass).closest(".motopress-helper").nextAll('.ui-resizable-handle:not(".motopress-hide")').show(),
b=a.closest('[class*="mp-span"]'));a.hasClass("motopress-row-select-handle")||a.hasClass("motopress-span-select-handle")||parent.CE.Navbar.myThis.showObjectControlBtns();(b.hasClass("ce_controls")||b.hasClass("ce_inline_editor")||b.hasClass("ce_code_editor")||b.hasClass("motopress-row"))&&!CE.Dialog.myThis.element.dialog("isOpen")&&CE.Dialog.myThis.open(a)}CE.DragDrop.interruptInsert=!1},unselect:function(){var a=c(".motopress-content-wrapper ."+this.selectedClass);a.length&&(a.each(function(){c(this).removeClass(CE.Selectable.myThis.selectedClass);
c(this).hasClass("motopress-span")||c(this).hasClass("motopress-row")||c(this).closest(".motopress-helper").nextAll('.ui-resizable-handle:not(".motopress-hide")').hide()}),parent.CE.Navbar.myThis.hideObjectControlBtns(),CE.Dialog.myThis.element.dialog("isOpen")&&CE.Dialog.myThis.element.dialog("close"),CE.InlineEditor.curElement&&CE.InlineEditor.curElement.controller().close(),CE.Selectable.blurWithoutScroll(a.prev()))}})});
